import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as o,o as c,c as l,b as n,d as s,e as p,a as t}from"./app-aq8PVJpR.js";const i={},u=t(`<h1 id="vue3-使用-高德地图api" tabindex="-1"><a class="header-anchor" href="#vue3-使用-高德地图api"><span>vue3 使用 高德地图api</span></a></h1><blockquote><p>在我们使用高德地图的时候，官方给我们推荐了很多案例，<code>demo</code>，但是这些案例都是使用原生方法接入，并没有提供<code>vue</code>或者<code>react</code> 的<code>demo</code>，<code>vue2</code>的 接入网上也很多人都有写过，今天我们就来看看 <code>vue3</code>如何使用常用的高德地图<code>api</code></p></blockquote><h2 id="前置工作" tabindex="-1"><a class="header-anchor" href="#前置工作"><span>前置工作</span></a></h2><blockquote><p>在开发之前我们需要了解 <code>vue3</code> 中接入高德地图的几个步骤</p></blockquote><ul><li>首先安装包并引入</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>npm i @amap<span class="token operator">/</span>amap<span class="token operator">-</span>jsapi<span class="token operator">-</span>loader <span class="token operator">--</span>save
<span class="token keyword">import</span> AMapLoader <span class="token keyword">from</span> <span class="token string">&#39;@amap/amap-jsapi-loader&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,6),r={href:"https://link.juejin.cn?target=https%3A%2F%2Flbs.amap.com%2Fapi%2Fjsapi-v2%2Fguide%2Fwebcli%2Fmap-vue1",target:"_blank",rel:"noopener noreferrer"},k=t("<li><p><code>vue2</code> 和 <code>vue3</code> 是有区别的，这里我们使用的是 <code>vue3</code> ，但这里 <code>vue3</code> 的方式还是选项式，不是组合式的，我自己写的时候使用的是组合式的，且集成了<code> ts</code>， 我后面发布完整 <code>.vue</code> 文件的时候 会去掉标签上的 ts，因为类型还没有完善，等后面完善了再贴更改以后得。为什么要使用 <code>shallowRef</code> 官方也给出了说明原因。</p></li>",1),d=n("h2",{id:"示例模块",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#示例模块"},[n("span",null,"示例模块")])],-1),v={href:"https://juejin.cn/post/7175339849212231741",target:"_blank",rel:"noopener noreferrer"},m={href:"https://juejin.cn/post/7175739486821679160",target:"_blank",rel:"noopener noreferrer"},b={href:"https://juejin.cn/post/7176104463516565559",target:"_blank",rel:"noopener noreferrer"},y={href:"https://juejin.cn/post/7176455699969835067",target:"_blank",rel:"noopener noreferrer"},g={href:"https://juejin.cn/post/7177196837915328570",target:"_blank",rel:"noopener noreferrer"},f=n("code",null,"vue3",-1),w=n("code",null,"this",-1),h=t(`<h3 id="模块的引入" tabindex="-1"><a class="header-anchor" href="#模块的引入"><span>模块的引入</span></a></h3><ul><li>首先<strong>导入</strong>的方式，和官网一样，后面我会贴完整代码， 这里我们使用 <code>plugins</code> 加载插件， 其他配置如 <code>Loca</code>， 直接进行配置， 这里需要注意版本问题， 写成 ‘2.0’ 是不行的，初始化函数在 <code>onmounted</code> 生命周期中执行。</li><li><strong>AMap存储</strong> 这里我做了很多存储，大家知道 <code>.value</code> 的语法是 <code>vue3</code> 获取 <code>ref</code> 的语法，我下面使用到的 都是<code>ref</code>，后面完整代码可以查看， 这里挂载的时候直接存一下，因为很多工具方法都会只用到他，这里后期业务逻辑我会抽离到 <code>pinia</code>中去，所以不需要在初始化函数中写全部的业务逻辑。</li><li><strong>模版样式不生效问题</strong>， 我们在使用的时候， 就像我之前写的文章，点位新增的时候，我们会插入 <code>content </code>字符串模版，替换点样式，这里有两种方案修改样式，一种是 插入 <code>DOM</code> ，不使用字符串，然后在 <code>DOM </code>上通过 <code>style</code> 直接修改样式，另一种就是使用模版的时候直接给 <code>class</code> 类名，但是这种样式如果我们给 <code>vue</code> 的 <code>style</code> 加了 <code>scoped</code> 就不会生效，这里大家可以自己灵活选择用哪种，我这里暂时先使用模版的方式，去掉了 <code>scoped</code>。</li><li><strong>图例</strong>， 图例这里除了导入的时候，需要配置一下，使用上来说变化不大，样式的修改还是复用了我之前的逻辑。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> AMapLoader <span class="token keyword">from</span> <span class="token string">&#39;@amap/amap-jsapi-loader&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">initMap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  AMapLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;b59c490f61a694b9d7576dd864f74d6e&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 申请好的Web端开发者Key，首次调用 load 时必填</span>
    <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">&#39;2.0&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;AMap.Scale&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;AMap.ToolBar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;AMap.MouseTool&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 需要使用的的插件列表，如比例尺&#39;AMap.Scale&#39;等</span>
    <span class="token literal-property property">Loca</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">version</span><span class="token operator">:</span><span class="token string">&#39;2.0.0&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      
      AMap<span class="token punctuation">.</span>value <span class="token operator">=</span> res
      <span class="token comment">// 上来就显示的中心点  北京 116.397, 39.918</span>
      <span class="token keyword">var</span> lnglat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">res<span class="token punctuation">.</span>LngLat</span><span class="token punctuation">(</span><span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">)</span>
      map<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">res<span class="token punctuation">.</span>Map</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">//设置地图容器id</span>
        <span class="token literal-property property">viewMode</span><span class="token operator">:</span> <span class="token string">&#39;3D&#39;</span><span class="token punctuation">,</span> <span class="token comment">//是否为3D地图模式</span>
        <span class="token literal-property property">zoom</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">//初始化地图级别</span>
        <span class="token literal-property property">center</span><span class="token operator">:</span> lnglat<span class="token punctuation">,</span> <span class="token comment">//初始化地图中心点位置</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      map<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">clearMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 清除地图覆盖物</span>
      <span class="token comment">// 地图是否可拖拽和缩放</span>
      map<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">dragEnable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否可拖拽</span>
        <span class="token literal-property property">zoomEnable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否可缩放</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token function">initWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 添加一些分布不均的点到地图上,地图上添加三个点标记，作为参照</span>
      coordData<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">marker</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setMarker</span><span class="token punctuation">(</span>marker<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">let</span> renderLine <span class="token operator">=</span> <span class="token function">setLine</span><span class="token punctuation">(</span>coordData<span class="token punctuation">)</span>
      <span class="token comment">// 设置线</span>
      <span class="token keyword">let</span> polyline <span class="token operator">=</span> renderLine<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> weight <span class="token operator">=</span> item<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">5</span> <span class="token operator">:</span> <span class="token number">3</span>
        <span class="token keyword">let</span> color <span class="token operator">=</span> item<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> headColors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> headColors<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        prev<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">setLines</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>current<span class="token punctuation">,</span> color<span class="token punctuation">,</span> weight<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> prev
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      map<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>polyline<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 绘制线</span>
      <span class="token comment">//创建右键菜单</span>
      menuInstance<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContextMenu</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token keyword">let</span> loca <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Loca<span class="token punctuation">.</span>Container</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">map</span><span class="token operator">:</span>map<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span>_loca <span class="token operator">=</span> loca<span class="token punctuation">;</span>

      <span class="token comment">// 图例, 图例可以实例化多个，使用定位来设置位置</span>
      <span class="token keyword">let</span> lengend <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Loca<span class="token punctuation">.</span>Legend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">loca</span><span class="token operator">:</span> loca<span class="token punctuation">,</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;管道类型&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">fontColor</span><span class="token operator">:</span> <span class="token string">&#39;rgba(255,255,255,1)&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">&#39;16px&#39;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&#39;rgba(255,255,255,0.2)&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token string">&#39;20px&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token string">&#39;40px&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">&#39;12px&#39;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">dataMap</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;省级管道&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> headColors<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;县级管道&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> headColors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">//修改图例排列方式</span>
      document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&quot;amap-loca loca-controls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;testid&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">var</span> lis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;#testid li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;test&#39;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">initMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="右键菜单" tabindex="-1"><a class="header-anchor" href="#右键菜单"><span>右键菜单</span></a></h3>`,4),x=n("strong",null,"右键菜单",-1),M=n("code",null,"this",-1),_={href:"https://link.juejin.cn?target=https%3A%2F%2Flbs.amap.com%2Fdemo%2Fjsapi-v2%2Fexample%2Fcontextmenu%2Fcustom-contextmenu",target:"_blank",rel:"noopener noreferrer"},j=t(`<p>这里使用了一个函数，但这个函数还不是类，但是他却在里面使用了<code>this</code>，实话来讲，这种写法确实不是很优秀，可扩展性很差，不够健壮，但没办法，谁让我们用了人家的东西呢是吧， 在 <code>vue3</code> 中这么用就不可以了，首先 <code>vue3</code> 里面使用 <code>this</code> 就不是官方建议的， 另外这里面还修改了函数原型上的方法，其实我得代码里面一共有两种右键菜单</p><p>一种是在指定点位上打开，另一种是在非点位的空白处打开，指定点位处打开的其实叫信息窗体，只不过是通过右键的方式触发，那个没有上面这个右键菜单麻烦。</p><ul><li>首先来说 <code>this</code> 问题， 这里的 <code>this</code> 实际上就是把我们的实例化对象挂载到上面而已，<code>vue3</code> 中没办法像 <code>vue2</code> 那样使用 <code>this</code>， 但也提供给我们了 <code>api</code> 来获取当前组件的实例化对象， 然后我没用使用函数， 使用了一个类，类构造这个方法， 模版也不适用字符串模版，因为这里字符串模版的事件绑定写死了，我们使用 <code>DOM</code> 来动态绑定事件，代码如下：</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> _this <span class="token operator">=</span> ctx
<span class="token comment">//自定义菜单类</span>
<span class="token keyword">class</span> <span class="token class-name">ContextMenu</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">map</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> me <span class="token operator">=</span> _this
    <span class="token comment">//地图中添加鼠标工具MouseTool插件</span>
    _this<span class="token punctuation">.</span>mouseTool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>value<span class="token punctuation">.</span>MouseTool</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span>
    _this<span class="token punctuation">.</span>contextMenuPositon <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">const</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 使用 DOM 方式, 方便添加事件</span>
    fragment<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&#39;info context_menu&#39;</span>
    <span class="token keyword">const</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;p&#39;</span><span class="token punctuation">)</span>
    p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delMarkerMenu<span class="token punctuation">)</span>
    p<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;移除上次选中信息&#39;</span>
    fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
    <span class="token comment">//通过content自定义右键菜单内容</span>
    _this<span class="token punctuation">.</span>contextMenu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>value<span class="token punctuation">.</span>ContextMenu</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">isCustom</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">content</span><span class="token operator">:</span> fragment<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">//地图绑定鼠标右击事件——弹出右键菜单</span>
    map<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;rightclick&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      me<span class="token punctuation">.</span>contextMenu<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>map<span class="token punctuation">,</span> e<span class="token punctuation">.</span>lnglat<span class="token punctuation">)</span>
      me<span class="token punctuation">.</span>contextMenuPositon <span class="token operator">=</span> e<span class="token punctuation">.</span>lnglat <span class="token comment">//右键菜单位置</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">delMarkerMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 右键菜单上次选中点的信息</span>
    <span class="token function">clearPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    _this<span class="token punctuation">.</span>mouseTool<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    _this<span class="token punctuation">.</span>contextMenu<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="完整代码" tabindex="-1"><a class="header-anchor" href="#完整代码"><span>完整代码</span></a></h2><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
 <span class="token operator">*</span> @Description<span class="token operator">:</span> 地图
 <span class="token operator">*</span> @Autor<span class="token operator">:</span> codeBo
 <span class="token operator">*</span> @Date<span class="token operator">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">10</span><span class="token operator">:</span><span class="token number">10</span>
 <span class="token operator">*</span> @LastEditors<span class="token operator">:</span> gjzxlihaibo@<span class="token number">163</span><span class="token punctuation">.</span>com
 <span class="token operator">*</span> @LastEditTime<span class="token operator">:</span> <span class="token number">2023</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">07</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">59</span><span class="token operator">:</span><span class="token number">08</span>
<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;root&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>添加选点请输入坐标<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
        经度：
        <span class="token operator">&lt;</span>input <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
        纬度：
        <span class="token operator">&lt;</span>input <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>输入完成<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;btn&quot;</span><span class="token operator">&gt;</span>清空输入<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> getCurrentInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> AMapLoader <span class="token keyword">from</span> <span class="token string">&#39;@amap/amap-jsapi-loader&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> shallowRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> coordData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./data&#39;</span>
<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ctx <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> _this <span class="token operator">=</span> ctx

<span class="token keyword">const</span> menuInstance <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// menu 实例</span>
<span class="token keyword">let</span> AMap <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// map 实例</span>
<span class="token keyword">let</span> currentPonit <span class="token operator">=</span> ref<span class="token operator">&lt;</span>HTMLElement <span class="token operator">|</span> <span class="token keyword">null</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 存储当前选中点 DOM</span>
<span class="token keyword">let</span> currentData <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 当前选重点信息</span>
<span class="token keyword">let</span> sourceInfoWindow <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> headColors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;#3366bb&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;#6622FF&#39;</span><span class="token punctuation">]</span>
<span class="token comment">// 工具方法</span>
<span class="token comment">// 修改DOM 类名</span>
<span class="token keyword">function</span> <span class="token function">changeStyle</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPonit<span class="token punctuation">.</span>value <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    currentPonit<span class="token punctuation">.</span>value<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&#39;active&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  currentPonit<span class="token punctuation">.</span>value <span class="token operator">=</span> res<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  currentData <span class="token operator">=</span> data
  currentPonit<span class="token punctuation">.</span>value<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;active&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 清除点信息</span>
<span class="token keyword">function</span> <span class="token function">clearPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPonit<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    currentPonit<span class="token punctuation">.</span>value<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&#39;active&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  currentPonit<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span>
  currentData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 设置线信息</span>
<span class="token keyword">function</span> <span class="token function">setLines</span><span class="token punctuation">(</span><span class="token parameter">lnglat<span class="token punctuation">,</span> color<span class="token punctuation">,</span> weight</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>value<span class="token punctuation">.</span>Polyline</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> lnglat<span class="token punctuation">,</span>
    <span class="token comment">// showDir:true ,// 设置线方向</span>
    <span class="token literal-property property">strokeColor</span><span class="token operator">:</span> color<span class="token punctuation">,</span> <span class="token comment">// 线颜色</span>
    <span class="token literal-property property">strokeWeight</span><span class="token operator">:</span> weight<span class="token punctuation">,</span> <span class="token comment">// 线宽</span>
    <span class="token literal-property property">strokeOpacity</span><span class="token operator">:</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token comment">// 透明度</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">markerClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;sourceInfoWindow.value&#39;</span><span class="token punctuation">,</span> sourceInfoWindow<span class="token punctuation">.</span>value<span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">)</span>

  sourceInfoWindow<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>contents<span class="token punctuation">)</span>
  sourceInfoWindow<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span>value<span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setInput</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> text <span class="token operator">=</span>
    e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>parentElement<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerText<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>
      <span class="token string">&#39;供给点&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> current <span class="token operator">=</span> coordData<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> item<span class="token punctuation">.</span>name <span class="token operator">===</span> text
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>text <span class="token operator">+</span> name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">initWindow</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 信息窗体</span>
  <span class="token keyword">let</span> infoWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>value<span class="token punctuation">.</span>InfoWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>value<span class="token punctuation">.</span>Pixel</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">retainWhenClose</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  sourceInfoWindow<span class="token punctuation">.</span>value <span class="token operator">=</span> infoWindow
  infoWindow<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;open&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> inputOut <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;inputOut&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> inputPro <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;inputPro&#39;</span><span class="token punctuation">)</span>
    inputOut<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;change&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setInput</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">&#39;inputOut&#39;</span><span class="token punctuation">)</span>
      window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    inputPro<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;change&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setInput</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">&#39;inputPro&#39;</span><span class="token punctuation">)</span>
      window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 抽离点位信息设置</span>
<span class="token keyword">function</span> <span class="token function">setMarker</span><span class="token punctuation">(</span><span class="token parameter">marker</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//创建右键菜单</span>
  <span class="token keyword">var</span> contextMenu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>value<span class="token punctuation">.</span>ContextMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">//右键放大</span>
  contextMenu<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span>
    <span class="token string">&#39;放大一级&#39;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      map<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">zoomIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
  <span class="token comment">//右键缩小</span>
  contextMenu<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span>
    <span class="token string">&#39;缩小一级&#39;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      map<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">zoomOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
  contextMenu<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">&#39;设置起点&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;设置起点&#39;</span><span class="token punctuation">,</span> marker<span class="token punctuation">,</span> markerd<span class="token punctuation">.</span>dom<span class="token punctuation">)</span>
    <span class="token function">changeStyle</span><span class="token punctuation">(</span>markerd<span class="token punctuation">.</span>dom<span class="token punctuation">,</span> marker<span class="token punctuation">)</span>
    contextMenu<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 关闭右键菜单</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  contextMenu<span class="token punctuation">.</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">&#39;与起点连线&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>currentPonit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;请选择起点&#39;</span><span class="token punctuation">)</span>
      contextMenu<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 这里其实可以根据数据判定线类型了，因为第二个选中点的信息+和第一个选中点的信息都有了,但是过滤方法会比较复杂</span>
      <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span>currentData<span class="token punctuation">.</span>position<span class="token punctuation">,</span> marker<span class="token punctuation">.</span>position<span class="token punctuation">]</span>
      <span class="token keyword">const</span> polyline1 <span class="token operator">=</span> <span class="token function">setLines</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">&#39;#3366bb&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
      map<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span>polyline1<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token function">clearPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    contextMenu<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 关闭右键菜单</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> content <span class="token operator">=</span> <span class="token string">&#39;&lt;div class=&quot;marker-route&quot;&gt;&lt;/div&gt;&#39;</span>
  <span class="token keyword">var</span> markerd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>value<span class="token punctuation">.</span>Marker</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">map</span><span class="token operator">:</span> map<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token comment">// icon: marker?.icon,</span>
    content<span class="token punctuation">,</span>
    <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>value<span class="token punctuation">.</span>Pixel</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 点标记是否可见</span>
    <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token punctuation">[</span>marker<span class="token punctuation">.</span>position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> marker<span class="token punctuation">.</span>position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">let</span> inputO <span class="token operator">=</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>marker<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&#39;inputOut&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> inputP <span class="token operator">=</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>marker<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&#39;inputPro&#39;</span><span class="token punctuation">)</span>
  <span class="token comment">// 左键点击的信息窗体， 宽度会在碰触到容器边缘的时候自适应的缩小</span>
  markerd<span class="token punctuation">.</span>contents <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">
    &lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>marker<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">供给点&lt;/div&gt;
    &lt;div&gt;出口压力：&lt;input id=&quot;inputOut&quot; class=&quot;input_inner&quot; value=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>
      inputO <span class="token operator">??</span> marker<span class="token operator">?.</span>pointData<span class="token operator">?.</span>out
    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;/&gt;kPa&lt;/div&gt;
    &lt;div&gt;供给量：&lt;input id=&quot;inputPro&quot; class=&quot;input_inner&quot; value=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>
      inputP <span class="token operator">??</span> marker<span class="token operator">?.</span>pointData<span class="token operator">?.</span>provide
    <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; /&gt;m³&lt;/div&gt;
    &lt;div&gt;位置：经度</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>marker<span class="token punctuation">.</span>position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,纬度</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>marker<span class="token punctuation">.</span>position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span>
  markerd<span class="token punctuation">.</span>data <span class="token operator">=</span> marker
  markerd<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> markerClick<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>marker<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">&#39;新疆&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 触发上面的点击事件</span>
    markerd<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">target</span><span class="token operator">:</span> markerd <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//绑定鼠标右击事件——弹出右键菜单</span>
  markerd<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;rightclick&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    contextMenu<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span>value<span class="token punctuation">,</span> e<span class="token punctuation">.</span>lnglat<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> markerd
<span class="token punctuation">}</span>

<span class="token comment">//自定义菜单类</span>
<span class="token keyword">class</span> <span class="token class-name">ContextMenu</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">map</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> me <span class="token operator">=</span> _this
    <span class="token comment">//地图中添加鼠标工具MouseTool插件</span>
    _this<span class="token punctuation">.</span>mouseTool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>value<span class="token punctuation">.</span>MouseTool</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span>
    _this<span class="token punctuation">.</span>contextMenuPositon <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">const</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 使用 DOM 方式, 方便添加事件</span>
    fragment<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&#39;info context_menu&#39;</span>
    <span class="token keyword">const</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;p&#39;</span><span class="token punctuation">)</span>
    p<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>delMarkerMenu<span class="token punctuation">)</span>
    p<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&#39;移除上次选中信息&#39;</span>
    fragment<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>
    <span class="token comment">//通过content自定义右键菜单内容</span>
    _this<span class="token punctuation">.</span>contextMenu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMap<span class="token punctuation">.</span>value<span class="token punctuation">.</span>ContextMenu</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">isCustom</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">content</span><span class="token operator">:</span> fragment<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">//地图绑定鼠标右击事件——弹出右键菜单</span>
    map<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;rightclick&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      me<span class="token punctuation">.</span>contextMenu<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>map<span class="token punctuation">,</span> e<span class="token punctuation">.</span>lnglat<span class="token punctuation">)</span>
      me<span class="token punctuation">.</span>contextMenuPositon <span class="token operator">=</span> e<span class="token punctuation">.</span>lnglat <span class="token comment">//右键菜单位置</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">delMarkerMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 右键菜单上次选中点的信息</span>
    <span class="token function">clearPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    _this<span class="token punctuation">.</span>mouseTool<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    _this<span class="token punctuation">.</span>contextMenu<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 过滤线方法</span>
<span class="token keyword">function</span> <span class="token function">setLine</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token operator">?.</span>line<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      prev<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>item<span class="token punctuation">.</span>line<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> prev
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token keyword">const</span> <span class="token function-variable function">initMap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  AMapLoader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token string">&#39;b59c490f61a694b9d7576dd864f74d6e&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 申请好的Web端开发者Key，首次调用 load 时必填</span>
    <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token string">&#39;2.0&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;AMap.Scale&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;AMap.ToolBar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;AMap.MouseTool&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 需要使用的的插件列表，如比例尺&#39;AMap.Scale&#39;等</span>
    <span class="token literal-property property">Loca</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">version</span><span class="token operator">:</span><span class="token string">&#39;2.0.0&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      
      AMap<span class="token punctuation">.</span>value <span class="token operator">=</span> res
      <span class="token comment">// 上来就显示的中心点  北京 116.397, 39.918</span>
      <span class="token keyword">var</span> lnglat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">res<span class="token punctuation">.</span>LngLat</span><span class="token punctuation">(</span><span class="token number">105</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">)</span>
      map<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">res<span class="token punctuation">.</span>Map</span><span class="token punctuation">(</span><span class="token string">&#39;container&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">//设置地图容器id</span>
        <span class="token literal-property property">viewMode</span><span class="token operator">:</span> <span class="token string">&#39;3D&#39;</span><span class="token punctuation">,</span> <span class="token comment">//是否为3D地图模式</span>
        <span class="token literal-property property">zoom</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">//初始化地图级别</span>
        <span class="token literal-property property">center</span><span class="token operator">:</span> lnglat<span class="token punctuation">,</span> <span class="token comment">//初始化地图中心点位置</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      map<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">clearMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 清除地图覆盖物</span>
      <span class="token comment">// 地图是否可拖拽和缩放</span>
      map<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">dragEnable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否可拖拽</span>
        <span class="token literal-property property">zoomEnable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否可缩放</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token function">initWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 添加一些分布不均的点到地图上,地图上添加三个点标记，作为参照</span>
      coordData<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">marker</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setMarker</span><span class="token punctuation">(</span>marker<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">let</span> renderLine <span class="token operator">=</span> <span class="token function">setLine</span><span class="token punctuation">(</span>coordData<span class="token punctuation">)</span>
      <span class="token comment">// 设置线</span>
      <span class="token keyword">let</span> polyline <span class="token operator">=</span> renderLine<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> weight <span class="token operator">=</span> item<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">5</span> <span class="token operator">:</span> <span class="token number">3</span>
        <span class="token keyword">let</span> color <span class="token operator">=</span> item<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> headColors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> headColors<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        prev<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">setLines</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>current<span class="token punctuation">,</span> color<span class="token punctuation">,</span> weight<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> prev
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      map<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>polyline<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 绘制线</span>
      <span class="token comment">//创建右键菜单</span>
      menuInstance<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContextMenu</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token keyword">let</span> loca <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Loca<span class="token punctuation">.</span>Container</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">map</span><span class="token operator">:</span>map<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span>_loca <span class="token operator">=</span> loca<span class="token punctuation">;</span>

      <span class="token comment">// 图例, 图例可以实例化多个，使用定位来设置位置</span>
      <span class="token keyword">let</span> lengend <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Loca<span class="token punctuation">.</span>Legend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">loca</span><span class="token operator">:</span> loca<span class="token punctuation">,</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;管道类型&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">fontColor</span><span class="token operator">:</span> <span class="token string">&#39;rgba(255,255,255,1)&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">&#39;16px&#39;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&#39;rgba(255,255,255,0.2)&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token string">&#39;20px&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token string">&#39;40px&#39;</span><span class="token punctuation">,</span>
              <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">&#39;12px&#39;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">dataMap</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;省级管道&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> headColors<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">{</span> <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;县级管道&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> headColors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">//修改图例排列方式</span>
      document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&quot;amap-loca loca-controls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;testid&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">var</span> lis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;#testid li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;test&#39;</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">initMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;scss&quot;</span><span class="token operator">&gt;</span>
#container <span class="token punctuation">{</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> 1350px<span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 900px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

#root <span class="token punctuation">{</span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

#root <span class="token operator">&gt;</span> div<span class="token operator">:</span>first<span class="token operator">-</span>child <span class="token punctuation">{</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>
  margin<span class="token operator">-</span>right<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> 5px<span class="token punctuation">;</span>
  box<span class="token operator">-</span>shadow<span class="token operator">:</span> 2px 2px 2px 2px #<span class="token number">333</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
#root <span class="token operator">&gt;</span> div<span class="token operator">:</span>first<span class="token operator">-</span>child <span class="token punctuation">{</span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
  flex<span class="token operator">-</span>direction<span class="token operator">:</span> column<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>context_menu <span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>
  min<span class="token operator">-</span>width<span class="token operator">:</span> 12rem<span class="token punctuation">;</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> white<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>context_menu p <span class="token punctuation">{</span>
  <span class="token literal-property property">cursor</span><span class="token operator">:</span> pointer<span class="token punctuation">;</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">.</span>25rem <span class="token number">1</span><span class="token punctuation">.</span>25rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>context_menu p<span class="token operator">:</span>hover <span class="token punctuation">{</span>
  <span class="token literal-property property">background</span><span class="token operator">:</span> #ccc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>btn <span class="token punctuation">{</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> 80px<span class="token punctuation">;</span>
  margin<span class="token operator">-</span>top<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>marker<span class="token operator">-</span>route <span class="token punctuation">{</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> 15px<span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 15px<span class="token punctuation">;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> #22ddb8<span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>active <span class="token punctuation">{</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> #f76809<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>content <span class="token punctuation">{</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> 1px<span class="token punctuation">;</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> white<span class="token punctuation">;</span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
  align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>content span <span class="token punctuation">{</span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> block<span class="token punctuation">;</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> 20px<span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 20px<span class="token punctuation">;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> #3366bb<span class="token punctuation">;</span>
  <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>content p <span class="token punctuation">{</span>
  margin<span class="token operator">-</span>right<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>test <span class="token punctuation">{</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 30px<span class="token punctuation">;</span>
  box<span class="token operator">-</span>sizing<span class="token operator">:</span> content<span class="token operator">-</span>box<span class="token punctuation">;</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> 2px 10px<span class="token punctuation">;</span>
  line<span class="token operator">-</span>height<span class="token operator">:</span> 30px<span class="token punctuation">;</span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> inline<span class="token punctuation">;</span>
  <span class="token literal-property property">float</span><span class="token operator">:</span> left<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>test a <span class="token punctuation">{</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> #<span class="token number">333</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>test span <span class="token punctuation">{</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> 80px <span class="token operator">!</span>important<span class="token punctuation">;</span>
  margin<span class="token operator">-</span>left<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token operator">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>amap<span class="token operator">-</span>info<span class="token operator">-</span>content <span class="token punctuation">{</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>test_container <span class="token punctuation">{</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> 180px<span class="token punctuation">;</span>
  flex<span class="token operator">-</span>direction<span class="token operator">:</span> column<span class="token punctuation">;</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> 10px 18px 10px 10px<span class="token punctuation">;</span>
  line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">1.4</span><span class="token punctuation">;</span>
  <span class="token literal-property property">overflow</span><span class="token operator">:</span> auto<span class="token punctuation">;</span>
  justify<span class="token operator">-</span>content<span class="token operator">:</span> center<span class="token punctuation">;</span>
  align<span class="token operator">-</span>items<span class="token operator">:</span> center<span class="token punctuation">;</span>
  <span class="token literal-property property">border</span><span class="token operator">:</span> 1px solid <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>input_inner <span class="token punctuation">{</span>
  margin<span class="token operator">-</span>right<span class="token operator">:</span> 5px<span class="token punctuation">;</span>
  <span class="token literal-property property">border</span><span class="token operator">:</span> 1px solid #<span class="token number">333</span><span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token operator">:</span> 2px<span class="token punctuation">;</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> 30px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>这里的业务逻辑还不完善， 输入部分的交互逻辑没有完成， 这个文件直接引入自己的项目，安装一下上面说过的依赖， 就可以使用，不过这里数据源需要自己根据自己的数据来构造就可以了，我引入的事 <code>data</code> 中的一组假数据，在这里给大家两组看一下</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> coordData <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;黑龙江&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">pointData</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">out</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
      <span class="token literal-property property">provide</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">line</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">current</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">[</span><span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span><span class="token number">126</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;吉林&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">126</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">pointData</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">out</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
      <span class="token literal-property property">provide</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">line</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">current</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">[</span><span class="token number">126</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">[</span><span class="token number">113</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8);function q(A,L){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,n("ul",null,[n("li",null,[n("p",null,[s("使用"),n("a",r,[s("官方介绍的方式"),p(a)]),s("进行加载")])]),k]),d,n("blockquote",null,[n("p",null,[s("这里我直接把我前面，写过的 地图业务需求的业务逻辑拿过来的，没有使用框架，直接在一个 html 文件当中引入，链接大家可以点击下面进行查看： "),n("a",v,[s("高德地图jsApi的使用"),p(a)]),n("a",m,[s("高德地图jsApi的点和线配置"),p(a)]),n("a",b,[s("高德地图jsApi的右键设置"),p(a)]),n("a",y,[s("高德地图jsApi的点位新增"),p(a)]),n("a",g,[s("高德地图jsApi的图例"),p(a)]),s(" 使用"),f,s(" 的时候，实例化的方式， "),w,s(" 的问题， 以及插入字符串模板的时候 事件响应的方式都需要更改，还是很麻烦的")])]),h,n("blockquote",null,[n("p",null,[x,s("， 右键菜单这里官方给我们的示例是使用一个 函数 进行实例化，里面使用了 "),M,s("， 所以这个我单独拿出来，首先我们看一下官方的 "),n("a",_,[s("demo"),p(a)])])]),j])}const I=e(i,[["render",q],["__file","vue3 使用 高德地图api.html.vue"]]);export{I as default};
