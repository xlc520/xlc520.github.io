import{_ as i}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as n,o,c as r,b as a,d as e,e as c,a as t}from"./app-aq8PVJpR.js";const g={},s=t('<h1 id="backblaze-b2-套用cloudflare静态文件存储" tabindex="-1"><a class="header-anchor" href="#backblaze-b2-套用cloudflare静态文件存储"><span>Backblaze(B2)套用CloudFlare静态文件存储</span></a></h1><h2 id="官方网址" tabindex="-1"><a class="header-anchor" href="#官方网址"><span>官方网址</span></a></h2><p>https://www.backblaze.com</p><h2 id="免费额度" tabindex="-1"><a class="header-anchor" href="#免费额度"><span>免费额度</span></a></h2><p>存储容量：10GB</p><p>网络流量：1GB/天</p><p>上传流量：无限</p><p>下载请求数：<strong>2500</strong>次/天</p><p>上传请求数：<strong>2500</strong>次/天</p><p>BUCKET(桶)：100个</p><p>BUCKET(桶)文件数：无限</p><p>超出了额度，收费$0.005 per GB per month for additional storage beyond 10 GB 和 $0.01 per GB beyond the free daily 1 GB.</p><p>这点流量能干点啥？</p><p>不过Backblaze加入了CloudFlare的 带宽联盟（ Bandwidth Alliance） ，所以Backblaze与CloudFlare之间的流量直接免费，也就是每天<strong>无限量</strong>下行流量。</p><p>配上CloudFlare配置缓存时间更久一些，辣么下载请求无限次免费啦。看看联盟有没有你熟悉的LOGO？</p><figure><img src="https://static.xlc520.tk/blogImage/c57394926b319339.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="注册账号" tabindex="-1"><a class="header-anchor" href="#注册账号"><span>注册账号</span></a></h2><p>https://www.backblaze.com/b2/sign-up.html</p><p>填写邮箱，密码即可注册。</p><p>登陆平台 - My Account - 我的设置 - 验证Email</p><p><strong>提醒一下，界面右下角可以切换到简体中文</strong></p><figure><img src="https://static.xlc520.tk/blogImage/6aa0b5180f158c7a.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="创建bucket" tabindex="-1"><a class="header-anchor" href="#创建bucket"><span>创建BUCKET</span></a></h2><p>1）登陆平台 - 创作一个桶</p><p>名称随意，桶里面的档案选择公众，其他保持默认即可</p><p><strong>特别提醒：桶名称要复杂一些，小心被刷流量！建议生成UUID</strong></p><figure><img src="https://static.xlc520.tk/blogImage/6bcae128a5aae3f2.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>2）创建成功后 点击 【上载/下载】可以去上传一个文件！</p><figure><img src="https://static.xlc520.tk/blogImage/d059f7012f8e6c7f.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>3）上传成功后，单机文件可以看见文件详情内容</p><p>特别要记住友好URL中的域名，如图是 <strong>f004.backblazeb2.com</strong></p><figure><img src="https://static.xlc520.tk/blogImage/5080cc13667c7a8b.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="配置cf" tabindex="-1"><a class="header-anchor" href="#配置cf"><span>配置CF</span></a></h2><h3 id="解析域名" tabindex="-1"><a class="header-anchor" href="#解析域名"><span>解析域名</span></a></h3><p>1）登陆Cloudflare，添加一个域名。定义一个前缀CNAME到 <strong>f004.backblazeb2.com</strong></p>',35),l={href:"https://51.ruyo.net/17863.html",target:"_blank",rel:"noopener noreferrer"},d=t('<figure><img src="https://static.xlc520.tk/blogImage/f7fe01ec953be195.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>2）解析完成后，浏览器打开地址 https://b2.i0lo1o.eu.org/file/ruyonet123/default.png</p><p>格式 <code>https://域名/file/桶名称/文件名</code></p><p>经过一波骚操作，访问URL提示：Error 522 错误？？</p><figure><img src="https://static.xlc520.tk/blogImage/d8f4f762cf8bb6a5.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>错误原因</p><p>Cloudflare 通过纯 HTTP 而不是 HTTPS 访问上游服务器。</p><p>但是Backblaze 仅支持安全的 HTTPS 连接，因此 HTTP 请求失败。</p><p>为了解决这个问题，在 Cloudflare 仪表板的 【SSL/TLS 部分】，将加密模式从“灵活”更改为“完全（严格）”，以便 Cloudflare 通过 HTTPS 连接到 Backblaze，并且需要 CA 颁发的证书。</p><figure><img src="https://static.xlc520.tk/blogImage/15904fb466238d83.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="设置缓存" tabindex="-1"><a class="header-anchor" href="#设置缓存"><span>设置缓存</span></a></h3><p>这个非常有必要噢~~~</p><p>B2 桶 - 自己创建的桶 - 桶设定</p><p>桶信息填写(缓存一个月)：<code>{&quot;cache-control&quot;:&quot;max-age=2592000&quot;}</code></p><figure><img src="https://static.xlc520.tk/blogImage/935e290f3246a582.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p><strong>Cloudflare 域名仪表盘 - 规则 - 页面规则 - 创建页面规则</strong></p><p>URL输入 上一步中设置的域名 <code>https://b2.i0lo1o.eu.org/*</code></p><p>设置选择： 缓存级别 - 标准，边缘缓存TTL - 1个月</p><figure><img src="https://static.xlc520.tk/blogImage/370cfd749d6b3126.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h3 id="隐藏桶名" tabindex="-1"><a class="header-anchor" href="#隐藏桶名"><span>隐藏桶名</span></a></h3><p>由于URL中暴露了桶名，CNAME的域名又很容易被猜到，怎么防止其他童鞋恶意刷你的免费额度呢？</p><p>下面介绍一下，怎么隐藏桶名~</p><p><strong>Cloudflare 域名仪表盘 - 规则 - 转换规则- 创建转换规则 - 重写URL</strong></p><figure><img src="https://static.xlc520.tk/blogImage/238a2376952d1ca8.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>传入请求匹配时：<code>b2.i0lo1o.eu.org</code></p><p>路径重写到：选择 Dynamic动态，<code>concat(&quot;/file/ruyonet123&quot;, http.request.uri.path)</code></p><p>这里一定要填写你自己的域名哈~~ 举一反三噢~</p><p><strong>然后浏览器打开URL：https://b2.i0lo1o.eu.org/default.png</strong></p><h2 id="api密钥" tabindex="-1"><a class="header-anchor" href="#api密钥"><span>API密钥</span></a></h2><p>路径：My Account - 应用程序键 - 添加新的应用程序密钥</p><p>名称随意，允许访问桶 建议选择1个，其他默认即可</p><figure><img src="https://static.xlc520.tk/blogImage/542c803a7f301bc8.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>2）提交成功，一定要记住记住相关信息，关了以后密钥就看不到了，只能重新创建</p><figure><img src="https://static.xlc520.tk/blogImage/0372c8e08620f583.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><h2 id="文件上传" tabindex="-1"><a class="header-anchor" href="#文件上传"><span>文件上传</span></a></h2><h3 id="官网上传" tabindex="-1"><a class="header-anchor" href="#官网上传"><span>官网上传</span></a></h3><p>直接登陆官网，在桶里直接上传！</p><h3 id="wp插件" tabindex="-1"><a class="header-anchor" href="#wp插件"><span>WP插件</span></a></h3><p>支持Backblaze的Wordpress插件不少呢，比如下面2个！填写API密钥即可！</p><p>wordpress.org/plugins/updraftplus/</p><p>wordpress.org/plugins/ilab-media-tools/</p><h3 id="sdk" tabindex="-1"><a class="header-anchor" href="#sdk"><span>SDK</span></a></h3><p>官方提供多种语音的SDK</p><p>https://github.com/Backblaze/</p><h3 id="其他" tabindex="-1"><a class="header-anchor" href="#其他"><span>其他</span></a></h3><p>ShareX，MiXplorer</p><h2 id="最后总结" tabindex="-1"><a class="header-anchor" href="#最后总结"><span>最后总结</span></a></h2><p>Cloudflare 在国内的访问情况不太稳定。如果仅作为境外用户访问，该方式是非常不错的！</p><p>Cloudflare 规则中可以支持防盗链等等配置，这里就不多介绍了。</p><p>B2免费额度用光，静态文件将无法访问，第二天恢复。</p>',50);function h(f,b){const p=n("ExternalLinkIcon");return o(),r("div",null,[s,a("p",null,[a("strong",null,[e("没有域名？参考文章："),a("a",l,[e("人人都可申请拥有EU.org免费域名"),c(p)])])]),d])}const x=i(g,[["render",h],["__file","Backblaze(B2)套用CloudFlare静态文件存储.html.vue"]]);export{x as default};
