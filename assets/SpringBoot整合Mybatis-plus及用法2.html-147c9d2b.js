import{_ as t,V as p,W as e,X as n,Y as s,$ as o,Z as c,E as u}from"./framework-debd98b7.js";const l={},i=n("h1",{id:"springboot整合mybatis-plus及用法2",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#springboot整合mybatis-plus及用法2","aria-hidden":"true"},"#"),s(" SpringBoot整合Mybatis-plus及用法2")],-1),k=n("h2",{id:"创建项目",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#创建项目","aria-hidden":"true"},"#"),s(" 创建项目")],-1),d={href:"https://start.spring.io",target:"_blank",rel:"noopener noreferrer"},r=c(`<p>我这版本用的springboot版本是 2.1.4</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="建表" tabindex="-1"><a class="header-anchor" href="#建表" aria-hidden="true">#</a> 建表</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">\`</span>topic<span class="token punctuation">\`</span></span> <span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">\`</span>id<span class="token punctuation">\`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">\`</span>title<span class="token punctuation">\`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">\`</span>content<span class="token punctuation">\`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">\`</span>tag<span class="token punctuation">\`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">\`</span>in_time<span class="token punctuation">\`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">\`</span>id<span class="token punctuation">\`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">14</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>插入一些数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">\`</span>topic<span class="token punctuation">\`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">\`</span>id<span class="token punctuation">\`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">\`</span>title<span class="token punctuation">\`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">\`</span>content<span class="token punctuation">\`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">\`</span>tag<span class="token punctuation">\`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">\`</span>in_time<span class="token punctuation">\`</span></span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
	<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;title1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;title2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;title3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&#39;title4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&#39;title4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">&#39;title4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">&#39;title4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&#39;title4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">&#39;title4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&#39;title4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">&#39;title4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">&#39;title4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">&#39;title4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;content4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;tag4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-04-15 09:33:35&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="创建实体类" tabindex="-1"><a class="header-anchor" href="#创建实体类" aria-hidden="true">#</a> 创建实体类</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Topic</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">IdType</span><span class="token punctuation">.</span><span class="token constant">AUTO</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> tag<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">Date</span> inTime<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="创建mapper" tabindex="-1"><a class="header-anchor" href="#创建mapper" aria-hidden="true">#</a> 创建mapper</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TopicMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Topic</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="创建service" tabindex="-1"><a class="header-anchor" href="#创建service" aria-hidden="true">#</a> 创建service</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Transactional</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TopicService</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Autowired</span>
  <span class="token keyword">private</span> <span class="token class-name">TopicMapper</span> topicMapper<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Topic</span><span class="token punctuation">&gt;</span></span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> topicMapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="创建controller" tabindex="-1"><a class="header-anchor" href="#创建controller" aria-hidden="true">#</a> 创建controller</h2><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TopicController</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Autowired</span>
  <span class="token keyword">private</span> <span class="token class-name">TopicService</span> topicService<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> topicService<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="添加包扫描" tabindex="-1"><a class="header-anchor" href="#添加包扫描" aria-hidden="true">#</a> 添加包扫描</h2><p>最后在启动类 <code>MybatisPlusDemoApplication.java</code> 上加上扫描包的注解，如下</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.mybatisplusdemo.mapper&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisPlusDemoApplication</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MybatisPlusDemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="测试" tabindex="-1"><a class="header-anchor" href="#测试" aria-hidden="true">#</a> 测试</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl http://localhost:808/
[{&quot;id&quot;:1,&quot;title&quot;:&quot;title1&quot;,&quot;content&quot;:&quot;content1&quot;,&quot;tag&quot;:&quot;tag1&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:2,&quot;title&quot;:&quot;title2&quot;,&quot;content&quot;:&quot;content2&quot;,&quot;tag&quot;:&quot;tag2&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:3,&quot;title&quot;:&quot;title3&quot;,&quot;content&quot;:&quot;content3&quot;,&quot;tag&quot;:&quot;tag3&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:4,&quot;title&quot;:&quot;title4&quot;,&quot;content&quot;:&quot;content4&quot;,&quot;tag&quot;:&quot;tag4&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:5,&quot;title&quot;:&quot;title4&quot;,&quot;content&quot;:&quot;content4&quot;,&quot;tag&quot;:&quot;tag4&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:6,&quot;title&quot;:&quot;title4&quot;,&quot;content&quot;:&quot;content4&quot;,&quot;tag&quot;:&quot;tag4&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:7,&quot;title&quot;:&quot;title4&quot;,&quot;content&quot;:&quot;content4&quot;,&quot;tag&quot;:&quot;tag4&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:8,&quot;title&quot;:&quot;title4&quot;,&quot;content&quot;:&quot;content4&quot;,&quot;tag&quot;:&quot;tag4&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:9,&quot;title&quot;:&quot;title4&quot;,&quot;content&quot;:&quot;content4&quot;,&quot;tag&quot;:&quot;tag4&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:10,&quot;title&quot;:&quot;title4&quot;,&quot;content&quot;:&quot;content4&quot;,&quot;tag&quot;:&quot;tag4&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:11,&quot;title&quot;:&quot;title4&quot;,&quot;content&quot;:&quot;content4&quot;,&quot;tag&quot;:&quot;tag4&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:12,&quot;title&quot;:&quot;title4&quot;,&quot;content&quot;:&quot;content4&quot;,&quot;tag&quot;:&quot;tag4&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:13,&quot;title&quot;:&quot;title4&quot;,&quot;content&quot;:&quot;content4&quot;,&quot;tag&quot;:&quot;tag4&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;}]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的一些用法在mybatis-plus官网上都能找到，都是基本用法，但开发项目不可能都是简单的crud，下面来说说一些高级的用法</p><h2 id="xml怎么配置" tabindex="-1"><a class="header-anchor" href="#xml怎么配置" aria-hidden="true">#</a> xml怎么配置</h2><p>mybatis-plus里内置的crud都给封装好了，都在<code>BaseMapper</code>接口里，包括CRUD，分页，那如果我要自定义查询，返回字段不是整个实体类的字段怎么办呢？</p><p>可以通过定义xml文件来查询，方法如下</p><p>在<code>TopicMapper.java</code>类的包下，创建一个 <code>TopicMapper.xml</code> 文件，填上下面内容</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.mybatisplusdemo.mapper.TopicMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- 映射表字段与实体类属性 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BaseResultMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.example.mybatisplusdemo.model.Topic<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>INTEGER<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>VARCHAR<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>VARCHAR<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tag<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>VARCHAR<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tag<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>in_time<span class="token punctuation">&quot;</span></span> <span class="token attr-name">jdbcType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DATE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inTime<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- 通用查询结果列 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Base_Column_List<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      id, title, content, tag, in_time
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- 自定义查询方法 --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个xml文件里定义一个方法</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectByTitle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>BaseResultMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Base_Column_List<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> from topic where title = &#39;\${title}&#39;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对应的，在 <code>TopicMapper.java</code> 里也要加上相应的接口</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TopicMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Topic</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">Topic</span> <span class="token function">selectByTitle</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> title<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在service里就可以调用了，controller里再调用service里的方法，然后测试</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> http://localhost:8080/selectByTitle?title<span class="token operator">=</span>titl1
<span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span>:1,<span class="token string">&quot;title&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;title1&quot;</span>,<span class="token string">&quot;content&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;content1&quot;</span>,<span class="token string">&quot;tag&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;tag1&quot;</span>,<span class="token string">&quot;inTime&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2019-04-15T05:00:00.000+0000&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到上面xml里定义方法时用到的返回类型是定义好的映射 <code>resultMap=&quot;BaseResultMap&quot;</code>和通用查询结果列 <code>&lt;include refid=&quot;Base_Column_List&quot;/&gt;</code>，那如果我想返回一个map怎么办呢？</p><p>将 <code>resultMap=&quot;BaseResultMap&quot;</code> 换成 <code>resultType=&quot;map&quot;</code>，查询语句里写上要查询的字段即可</p><h2 id="自定义返回结果" tabindex="-1"><a class="header-anchor" href="#自定义返回结果" aria-hidden="true">#</a> 自定义返回结果</h2><p>上面最后提到返回一个map，这需求也很常见，比如一个表字段有10个，我只想要5个，那这时候再去定义通用查询结果列就不太好了，两个还好，多了xml就会很乱，所以map是最适合的方式，下面来定义一个查询看下效果</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&lt;</span><span class="token keyword">select</span> id<span class="token operator">=</span><span class="token string">&quot;selectTitleList&quot;</span> resultType<span class="token operator">=</span><span class="token string">&quot;map&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">select</span> id<span class="token punctuation">,</span> title<span class="token punctuation">,</span> in_time <span class="token keyword">from</span> topic
<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">select</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面定义了一个方法，返回用的是<code>map</code>，查询字段有 <code>id, title</code>，<code>BaseMapper.java</code> 里接口定义如下</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TopicMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Topic</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectTitleList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>写好service,controller，测试</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl http://localhost:8080/selectTitleList
[{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:1,&quot;title&quot;:&quot;title1&quot;},
{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:2,&quot;title&quot;:&quot;title2&quot;},
{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:3,&quot;title&quot;:&quot;title3&quot;},
{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:4,&quot;title&quot;:&quot;title4&quot;},
{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:5,&quot;title&quot;:&quot;title4&quot;},
{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:6,&quot;title&quot;:&quot;title4&quot;},
{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:7,&quot;title&quot;:&quot;title4&quot;},
{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:8,&quot;title&quot;:&quot;title4&quot;},
{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:9,&quot;title&quot;:&quot;title4&quot;},
{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:10,&quot;title&quot;:&quot;title4&quot;},
{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:11,&quot;title&quot;:&quot;title4&quot;},
{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:12,&quot;title&quot;:&quot;title4&quot;},
{&quot;in_time&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:13,&quot;title&quot;:&quot;title4&quot;}]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="map转驼峰" tabindex="-1"><a class="header-anchor" href="#map转驼峰" aria-hidden="true">#</a> map转驼峰</h2><p>上面查询结果可以看到，返回的确实是map，没有问题，但java类中的驼峰没有转回来呀，这样就不友好了，比如前端定义好了返回结果类，本来查询列表好好的，但换成详细查询的时候，字段收不到了，找了半天原来是字段变了，又是一场撕逼</p><p>mybatis我不知道有没有办法解决，但mybatis-plus人家很用心呀，一个配置就解决了这个问题</p><p>创建 <code>MybatisPlusConfig.java</code> 配置类，添加上下面配置即可实现<code>map转驼峰</code>和分页功能，分页功能下面再介绍，这里就先配置上</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.mybatisplusdemo.mapper&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisPlusConfig</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">&quot;mybatisSqlSession&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">SqlSessionFactory</span> <span class="token function">sqlSessionFactory</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">&quot;dataSource&quot;</span><span class="token punctuation">)</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">MybatisSqlSessionFactoryBean</span> sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MybatisSqlSessionFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MybatisConfiguration</span> configuration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MybatisConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    configuration<span class="token punctuation">.</span><span class="token function">setDefaultScriptingLanguage</span><span class="token punctuation">(</span><span class="token class-name">MybatisXMLLanguageDriver</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    configuration<span class="token punctuation">.</span><span class="token function">setJdbcTypeForNull</span><span class="token punctuation">(</span><span class="token class-name">JdbcType</span><span class="token punctuation">.</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//*注册Map 下划线转驼峰*</span>
   configuration<span class="token punctuation">.</span><span class="token function">setObjectWrapperFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MybatisMapWrapperFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 添加数据源</span>
    sqlSessionFactory<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>

    sqlSessionFactory<span class="token punctuation">.</span><span class="token function">setConfiguration</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 添加分页插件，这里有个坑</span>
    <span class="token class-name">PaginationInterceptor</span> paginationInterceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PaginationInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sqlSessionFactory<span class="token punctuation">.</span><span class="token function">setPlugins</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Interceptor</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span>paginationInterceptor<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>加上这个配置类后，Mapper扫描注解顺便也从启动类上移到这个类上配置，然后再次启动项目，测试</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>curl http://localhost:8080/selectTitleList
[{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:1,&quot;title&quot;:&quot;title1&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:2,&quot;title&quot;:&quot;title2&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:3,&quot;title&quot;:&quot;title3&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:4,&quot;title&quot;:&quot;title4&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:5,&quot;title&quot;:&quot;title4&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:6,&quot;title&quot;:&quot;title4&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:7,&quot;title&quot;:&quot;title4&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:8,&quot;title&quot;:&quot;title4&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:9,&quot;title&quot;:&quot;title4&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:10,&quot;title&quot;:&quot;title4&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:11,&quot;title&quot;:&quot;title4&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:12,&quot;title&quot;:&quot;title4&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:13,&quot;title&quot;:&quot;title4&quot;}]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再看看结果，<code>in_time</code>已经从下划线转成驼峰 <code>inTime</code> 命名了，可喜可贺可喜可贺</p><h2 id="basemapper分页" tabindex="-1"><a class="header-anchor" href="#basemapper分页" aria-hidden="true">#</a> BaseMapper分页</h2><p>分页分两种，一种是BaseMapper接口内置的分页接口，直接调用即可，使用如下</p><p>在service里直接调用方法</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">IPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Topic</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectWithPage</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> pageNo<span class="token punctuation">,</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Topic</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">IPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Topic</span><span class="token punctuation">&gt;</span></span> iPage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>pageNo<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> topicMapper<span class="token punctuation">.</span><span class="token function">selectPage</span><span class="token punctuation">(</span>iPage<span class="token punctuation">,</span> wrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试 <code>curl http://localhost:8080/selectWithPage?pageNo=1&amp;pageSize=5</code></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{&quot;records&quot;:[{&quot;id&quot;:1,&quot;title&quot;:&quot;title1&quot;,&quot;content&quot;:&quot;content1&quot;,&quot;tag&quot;:&quot;tag1&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:2,&quot;title&quot;:&quot;title2&quot;,&quot;content&quot;:&quot;content2&quot;,&quot;tag&quot;:&quot;tag2&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:3,&quot;title&quot;:&quot;title3&quot;,&quot;content&quot;:&quot;content3&quot;,&quot;tag&quot;:&quot;tag3&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:4,&quot;title&quot;:&quot;title4&quot;,&quot;content&quot;:&quot;content4&quot;,&quot;tag&quot;:&quot;tag4&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;},
{&quot;id&quot;:5,&quot;title&quot;:&quot;title4&quot;,&quot;content&quot;:&quot;content4&quot;,&quot;tag&quot;:&quot;tag4&quot;,&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;}],
&quot;total&quot;:13,&quot;size&quot;:5,&quot;current&quot;:1,&quot;searchCount&quot;:true,&quot;pages&quot;:3}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="自定义查询分页" tabindex="-1"><a class="header-anchor" href="#自定义查询分页" aria-hidden="true">#</a> 自定义查询分页</h2><p>上面说到了使用自定义查询时可以指定查询字段，然后返回map即可，那分页怎么办？</p><p>mybatis-plus里有一个 <code>IPage</code> 接口，通过这个接口来封装分页信息，用法如下</p><p>在xml里定义查询方法</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectMapWithPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  select id, title, in_time from topic
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>BaseMapper.java</code> 里定义接口</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TopicMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Topic</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token class-name">IPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectMapWithPage</span><span class="token punctuation">(</span><span class="token class-name">IPage</span> iPage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>TopicService.java</code> 里封装 IPage 对象然后调用接口</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">IPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectMapWithPage</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> pageNo<span class="token punctuation">,</span> <span class="token class-name">Integer</span> pageSize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">IPage</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&gt;</span></span> iPage <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>pageNo<span class="token punctuation">,</span> pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
  iPage <span class="token operator">=</span> topicMapper<span class="token punctuation">.</span><span class="token function">selectMapWithPage</span><span class="token punctuation">(</span>iPage<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> iPage<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试 <code>curl http://localhost:8080/selectMapWithPage?pageNo=1&amp;pageSize=5</code></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{&quot;records&quot;:[{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:1,&quot;title&quot;:&quot;title1&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:2,&quot;title&quot;:&quot;title2&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:3,&quot;title&quot;:&quot;title3&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:4,&quot;title&quot;:&quot;title4&quot;},
{&quot;inTime&quot;:&quot;2019-04-15T14:33:35.000+0000&quot;,&quot;id&quot;:5,&quot;title&quot;:&quot;title4&quot;}],
&quot;total&quot;:13,&quot;size&quot;:5,&quot;current&quot;:1,&quot;searchCount&quot;:true,&quot;pages&quot;:3}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="注意" tabindex="-1"><a class="header-anchor" href="#注意" aria-hidden="true">#</a> 注意</h2><ol><li>在xml文件里写的sql语句不要在最后带上<code>;</code>，因为有些分页查询会自动拼上 <code>limit 0, 10;</code> 这样的sql语句，如果你在定义sql的时候已经加上了 <code>;</code>，调用这个查询的时候就会报错了</li><li>往xml文件里的查询方法里传参数要带上 <code>@Param(&quot;&quot;)</code> 注解，这样mybatis才认，否则会报错</li><li>分页中传的pageNo可以从0或者1开始，查询出的结果是一样的，这一点不像jpa里必须是从0开始才是第一页</li></ol><h2 id="异常" tabindex="-1"><a class="header-anchor" href="#异常" aria-hidden="true">#</a> 异常</h2><p>2019-06-21更新</p><p>今天创建了个项目，使用了 mybatis-plus(v3.1.1) 查询数据的时候出了个异常 <code>Error evaluating expression &#39;ew.sqlSegment != null and ew.sqlSegment != &#39;&#39; and ew.nonEmptyOfWhere</code></p><p>原因好像是java的反射出的问题，devtools 也是利用java的反射来实现的热加载，mybatis-plus 里的 lambda 表达式也是用反射来找到属性的值进行sql拼接的，估计是这俩货冲突了，不过挺好奇，项目里还用到了 lombok，就没问题，这。。</p><p>解决方法: 把<code>spring-boot-devtools</code>这个依赖去掉就可以了</p>`,72);function q(v,m){const a=u("ExternalLinkIcon");return p(),e("div",null,[i,k,n("p",null,[s("普通的spring-boot项目，在 "),n("a",d,[s("start.spring.io"),o(a)]),s("或者使用idea创建都行，相关依赖如下")]),r])}const b=t(l,[["render",q],["__file","SpringBoot整合Mybatis-plus及用法2.html.vue"]]);export{b as default};
