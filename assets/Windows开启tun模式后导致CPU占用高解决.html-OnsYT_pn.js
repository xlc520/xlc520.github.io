import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as e,o,c as r,b as n,n as p,g as i,a as l}from"./app-DS3HItsn.js";const c={},d=l(`<h1 id="windows开启tun模式后导致cpu占用100-解决" tabindex="-1"><a class="header-anchor" href="#windows开启tun模式后导致cpu占用100-解决"><span>Windows开启tun模式后导致CPU占用100%解决</span></a></h1><p>使用TUN模式进行上网，出现无法上网并且在开启TUN模式后CPU占用100%，无论使用哪一个工具开启TUN模式都会出现同样的问题。</p><p>根据大量搜索，出现该情况可能的原因：多网络、多网卡的情况下，clash 可能无法根据自动跃点识别正在使用的网络接口，造成路由回环，CPU、内存在开启 tun 瞬间，系统资源占用剧增</p><blockquote><p>测试包括 Clash Verge 、v2rayN 、nekoray</p></blockquote><p>使用以下任意方法或者按照顺序设置，每个方法都是测试看是否能用，自测试设置完两个方法才解决</p><h2 id="方法1-网络重置" tabindex="-1"><a class="header-anchor" href="#方法1-网络重置"><span>方法1.网络重置</span></a></h2><h3 id="windows-11" tabindex="-1"><a class="header-anchor" href="#windows-11"><span>Windows 11</span></a></h3><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>设置 - 网络和Internet - 高级网络设置 - 更多设置 - 网络重置 - 立即重置
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Windows 10 忘记了，大概也在差不多的位置</p><p>然后重启电脑，测试开启TUN看CPU占用</p><h2 id="方法2-关闭路由转发" tabindex="-1"><a class="header-anchor" href="#方法2-关闭路由转发"><span>方法2.关闭路由转发</span></a></h2><p>查看接口名称</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>netsh interface show interface

管理员状态     状态           类型             接口名称
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
已启用            已连接            专用               WLAN
已启用            已连接            专用               以太网
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>关闭路由转发，可以将ipv4改为ipv6，将ipv6的路由转发也关闭。</p><div class="language-powershell line-numbers-mode" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code>netsh interface ipv4 <span class="token function">set</span> interface <span class="token string">&quot;WLAN&quot;</span> forwarding=disabled
netsh interface ipv6 <span class="token function">set</span> interface <span class="token string">&quot;WLAN&quot;</span> forwarding=disabled
netsh interface ipv4 <span class="token function">set</span> interface <span class="token string">&quot;以太网&quot;</span> forwarding=disabled
netsh interface ipv6 <span class="token function">set</span> interface <span class="token string">&quot;以太网&quot;</span> forwarding=disabled
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>经测试执行完上述已成功解决</p><p>如果还不行，可以尝试切换 Tun 模式，改为 system</p><h2 id="其他问题" tabindex="-1"><a class="header-anchor" href="#其他问题"><span>其他问题</span></a></h2><p>如果报错</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>ERR [Inbound] start failed error=Error creating interface: Cannot create a file when that file already exists. type=TUN stackType=system inet=198.18.0.1/16
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>请将 Windows 系统的默认安全设置（防火墙/Windows Defender/内核隔离/DEP/驱动签名/基于声誉的保护设置/应用和浏览器控制/VBS) ，能关闭的都关闭，并恢复系统默认动态端口范围为补丁更新前</p><p>关闭 VBS（虚拟化安全）：<code>bcdedit /set hypervisorlaunchtype off</code> 关闭 DEP (数据执行保护)：<code>bcdedit.exe /set {current} nx AlwaysOff</code> 修改 Windows 动态端口范围为默认状态：<code>netsh int ipv4 set dynamic tcp start=49152 num=16384 &amp;&amp; netsh int ipv4 set dynamic udp start=49152 num=16384</code> 关闭 windows 防火墙：<code>netsh advfirewall set allprofiles state off</code> 关闭 驱动强制签名：<code>bcdedit.exe -set loadoptions DDISABLE_INTEGRITY_CHECKS &amp; bcdedit.exe /set nointegritychecks on &amp;&amp; bcdedit/set testsigning on</code></p><p>随后重启系统，重新开启 TUN 模式</p><p>如果还不行，可以尝试切换 Tun Stack，改为 system</p>`,24);function u(m,h){const a=e("VPBanner"),t=e("Share");return o(),r("div",null,[n(a,p(i({title:"Windows开启tun模式后导致CPU占用100%解决方法",content:"Windows开启tun模式后导致CPU占用100%解决方法",logo:null,color:"var(--banner-text)",background:"rgba(217, 244, 208, 0.5)",actions:[{text:"Windows开启tun模式后导致CPU占用高解决",link:"/pc/Windows开启tun模式后导致CPU占用高解决"}]})),null,16),d,n(t,{colorful:"",service:"email,qq,qzone,qrcode,weibo,telegram,twitter"})])}const w=s(c,[["render",u],["__file","Windows开启tun模式后导致CPU占用高解决.html.vue"]]),g=JSON.parse('{"path":"/pc/Windows%E5%BC%80%E5%90%AFtun%E6%A8%A1%E5%BC%8F%E5%90%8E%E5%AF%BC%E8%87%B4CPU%E5%8D%A0%E7%94%A8%E9%AB%98%E8%A7%A3%E5%86%B3.html","title":"Windows开启tun模式后导致CPU占用高解决","lang":"zh-CN","frontmatter":{"title":"Windows开启tun模式后导致CPU占用高解决","excerpt":"Windows开启tun模式后导致CPU占用100%解决方法","description":"Windows开启tun模式后导致CPU占用100%解决方法","date":"2024-07-02T00:00:00.000Z","category":"pc","tag":"pc","author":"xlc520","article":true,"timeline":true,"icon":"computer","head":[["meta",{"property":"og:url","content":"https://blog.ciberviler.top/pc/Windows%E5%BC%80%E5%90%AFtun%E6%A8%A1%E5%BC%8F%E5%90%8E%E5%AF%BC%E8%87%B4CPU%E5%8D%A0%E7%94%A8%E9%AB%98%E8%A7%A3%E5%86%B3.html"}],["meta",{"property":"og:site_name","content":"StudyNote - 丰富的知识笔记库"}],["meta",{"property":"og:title","content":"Windows开启tun模式后导致CPU占用高解决"}],["meta",{"property":"og:description","content":"Windows开启tun模式后导致CPU占用100%解决方法"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-04T13:58:25.000Z"}],["meta",{"property":"article:author","content":"xlc520"}],["meta",{"property":"article:tag","content":"pc"}],["meta",{"property":"article:published_time","content":"2024-07-02T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-08-04T13:58:25.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Windows开启tun模式后导致CPU占用高解决\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-07-02T00:00:00.000Z\\",\\"dateModified\\":\\"2024-08-04T13:58:25.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xlc520\\"}]}"]]},"headers":[{"level":2,"title":"方法1.网络重置","slug":"方法1-网络重置","link":"#方法1-网络重置","children":[{"level":3,"title":"Windows 11","slug":"windows-11","link":"#windows-11","children":[]}]},{"level":2,"title":"方法2.关闭路由转发","slug":"方法2-关闭路由转发","link":"#方法2-关闭路由转发","children":[]},{"level":2,"title":"其他问题","slug":"其他问题","link":"#其他问题","children":[]}],"git":{"createdTime":1722778469000,"updatedTime":1722779905000,"contributors":[{"name":"xlc","email":"2215400217@qq.com","commits":2}]},"readingTime":{"minutes":2.59,"words":777},"filePathRelative":"pc/Windows开启tun模式后导致CPU占用高解决.md","localizedDate":"2024年7月2日"}');export{w as comp,g as data};
