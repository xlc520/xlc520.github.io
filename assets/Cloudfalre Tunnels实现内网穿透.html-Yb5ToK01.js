import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as a,c as o,a as c}from"./app-aq8PVJpR.js";const l={},t=c('<h1 id="cloudfalre-tunnels实现内网穿透" tabindex="-1"><a class="header-anchor" href="#cloudfalre-tunnels实现内网穿透"><span>Cloudfalre Tunnels实现内网穿透</span></a></h1><h2 id="前提条件" tabindex="-1"><a class="header-anchor" href="#前提条件"><span>前提条件</span></a></h2><ul><li>注册一个Cloudflare账号，选择免费计划就行</li><li>准备一个域名，没有就买一个，不想买可以自己找免费的</li></ul><h2 id="将域名解析转移到cloudflare" tabindex="-1"><a class="header-anchor" href="#将域名解析转移到cloudflare"><span>将域名解析转移到Cloudflare</span></a></h2><p>1、登录Cloudfalre，将你的域名添加到<code>Zones</code>中，然后在<code>DNS</code>上找到名称服务器的网址，如下图红框所示，两个网址就是： <img src="https://static.xlc520.tk/blogImage/640-1695954595245-0.jpeg" alt="图片" loading="lazy"><code>将域名添加到Cloudflare中并找到NS服务网址</code></p><p>2、比如，域名是从腾讯云购买的，则找到你的域名，在管理中将DNS解析服务器改成Cloudfalre的名称服务器网址即可，如下图 <img src="https://static.xlc520.tk/blogImage/640-1695954595244-1.jpeg" alt="图片" loading="lazy"><code>在腾讯云控制台中修改域名的DNS解析服务器</code></p><h2 id="创建tunnels" tabindex="-1"><a class="header-anchor" href="#创建tunnels"><span>创建Tunnels</span></a></h2><p>1、打开Cloudfalre控制台，依次点击<code>Zero Trust</code>-&gt; <code>Access</code> -&gt; <code>Tunnels</code><img src="https://static.xlc520.tk/blogImage/640-1695954595244-2.jpeg" alt="图片" loading="lazy">----&gt; <img src="https://static.xlc520.tk/blogImage/640-1695954595244-3.jpeg" alt="图片" loading="lazy"></p><p>2、创建Tunnel 1）点击<code>Create Tunnel</code>按钮，创建一个新的隧道 <img src="https://static.xlc520.tk/blogImage/640-1695954595244-4.jpeg" alt="图片" loading="lazy"></p><p>2）名称按自己想法填，然后点击<code>Save Tunnel</code><img src="https://static.xlc520.tk/blogImage/640-1695954595244-5.jpeg" alt="图片" loading="lazy"> 3)保存后，回到Tunnels界面，找到上面创建的Tunnel，点击右边三个点，选择<code>Configure</code>,到达配置页面 <img src="https://static.xlc520.tk/blogImage/640-1695954595244-6.jpeg" alt="图片" loading="lazy"></p><p>4)在配置界面，切换到<code>Public Hostname</code>页签，点击<code>Add a Public Hostname</code>,创建一个新的穿通域名 <img src="https://static.xlc520.tk/blogImage/640-1695954595245-7.jpeg" alt="图片" loading="lazy"></p><blockquote><p>参考图中的说明进行填写，划重点： <code>Subdomain</code>:就是你要用的子域名，比如你想用x.abc.com访问家中的服务，就填a <code>Domain</code>:就是你的域名，直接选择 <code>Path</code>:路径，不用填 <code>type</code>:内网服务的协议，一般是http，如果你非要给内网服务配置了https，你就选https <code>URL</code>:内网服务的ip+端口，比如你想穿透到内网的WP博客，则填写WP的ip和端口。 <code>注意:此处如果内网服务是docker部署的，需要注意使用合适的ip和端口</code></p></blockquote><figure><img src="https://static.xlc520.tk/blogImage/640-1695954595245-8.jpeg" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><ol><li>设置并保存后，回到域名的DNS记录页面，会看到已经自动添加了一个CNAME记录，并且开启了代理。什么都不要动，保持就行。</li></ol><h2 id="部署connector" tabindex="-1"><a class="header-anchor" href="#部署connector"><span>部署connector</span></a></h2><p>上面的步骤已经完成了域名配置以及隧道配置，但是要想让域名自动找到你的内网服务，还需要你在内网安装一个程序，或者叫连接器，用于与Cloudfalre Tunnel进行通信。 1、回到Tunnels界面，并点击<code>Configure</code>进入配置页面，在<code>Overview</code>页签中，可以看到选择安装环境的按钮，选择一个，然后安装下面的提示安装即可。 <img src="https://static.xlc520.tk/blogImage/640-1695954595245-9.jpeg" alt="图片" loading="lazy"></p><p>2、本文以<code>Docker</code>为例，选择<code>Docker</code>按钮，下面会显示出一键启动镜像的命令，把命令复制到你的内网机器上，打开终端，直接执行即可。实际上就是启动了一个<code>Cloudflared</code>容器 <img src="https://static.xlc520.tk/blogImage/640-1695954595245-10.jpeg" alt="图片" loading="lazy"></p>',17),d=[t];function n(s,i){return a(),o("div",null,d)}const p=e(l,[["render",n],["__file","Cloudfalre Tunnels实现内网穿透.html.vue"]]);export{p as default};
