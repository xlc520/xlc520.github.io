import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as e,c as a,a as t}from"./app-DDjfOKh-.js";const n={};function l(d,i){return e(),a("div",null,i[0]||(i[0]=[t(`<h1 id="windows-10-安装-wsa" tabindex="-1"><a class="header-anchor" href="#windows-10-安装-wsa"><span>Windows 10 安装 WSA</span></a></h1><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>Windows Subsystem for Android （官方中文译名：适用于 Android™️ 的 Windows 子系统）包括 Linux 内核和基于 Android 开源项目（AOSP）版本的 Android 操作系统。该子系统在 Hyper-V 虚拟机中运行，可以将 AOSP 环境中 App 的运行时和 API 映射到 Windows 图形层、内存缓冲区、输入模式、物理和虚拟设备以及传感器 ，已现身微软商店，需要 8GB 内存并推荐 16GB 配置，可在 ARM64 或 x64 处理器以及英特尔、AMD、高通的 CPU 上运行。 目前只有 Windows11 可以通过微软应用商店直接安装 WSA，Windows10 的用户可以按照本文的步骤安装。</p><h2 id="步骤" tabindex="-1"><a class="header-anchor" href="#步骤"><span>步骤</span></a></h2><ol><li>将你的系统更新到 Windows 10 22H2 10.0.19045.2311 或更高版本.</li></ol><ul><li>你可以通过 <code>winver</code> 命令查看您当前的 Windows 版本.</li><li>如果您的 Windows 版本低于 10.0.19045.2311, 请将您的系统更新到 10.0.19045.2311 或以上.</li></ul><ol><li>安装 WSL2</li></ol><ul><li>在开始中搜索 <strong>启用或关闭 Windows 功能</strong></li><li>将 <strong>Hyper-V</strong>、<strong>适用于 Linux 的 Windows 子系统</strong>、<strong>虚拟机平台</strong> 前面的选择框打勾后确定</li><li>重启系统</li><li>打开 <strong>Microsoft Store</strong>，搜索 <strong>Ubuntu</strong> 并安装（其他的 Linux 发行版也可以，本文使用 Ubuntu）</li><li>运行 Ubuntu 等待系统启动并设置用户密码，密码会在下一步用到</li></ul><ol><li>获取 WSA AppX 包（在 Linux 中执行）</li></ol><ul><li><p>执行 <code>apt install git</code></p></li><li><p>执行 <code>cd /</code></p></li><li><p>执行 <code>git clone https://ghproxy.com/https://github.com/LSPosed/MagiskOnWSALocal.git</code></p></li><li><p>执行 <code>sudo bash /MagiskOnWSALocal/scripts/install_deps.sh</code>（过程中会提示输入密码）</p></li><li><p>【可选】【推荐】设置代理，加速下载</p><ul><li>以下操作在 Windows 执行</li><li>按下 <code>Win + R</code>，输入 <code>cmd</code> 回车</li><li>执行 <code>ipconfig</code>，找到 <code>以太网适配器 vEthernet (WSL):</code> 后面的 <code>IPv4 地址</code></li><li>编辑 <code>\\\\wsl.localhost\\Ubuntu\\MagiskOnWSALocal\\scripts\\build.sh</code></li><li>搜索 <code>aria2c</code></li><li>在 <code>aria2c</code> 后面添加 <code>--all-proxy=&quot;&lt;IPv4 地址&gt;:&lt;Windows代理端口号&gt;&quot;</code>（注意和<code>aria2c</code>之间有空格）</li></ul></li><li><p>执行 <code>sudo bash /MagiskOnWSALocal/scripts/run.sh</code>（过程中会提示输入密码）</p></li><li><p>新界面中使用 <code>↑</code> <code>↓</code> <code>←</code> <code>→</code> 键更改选项，空格键选中，回车键确认</p></li><li><p><code>Build arch</code>选择<code>x64</code>还是 <code>arm64</code></p><p>需要根据设备来，你可以通过以下方式确定</p><ul><li>以下操作在 Windows 执行</li><li>按下 <code>Win + R</code>，输入 <code>cmd</code> 回车</li><li>执行 <code>echo %PROCESSOR_ARCHITECTURE%</code></li><li>如果显示 <strong>x86</strong> 或 <strong>AMD64</strong> 则选择 <code>x64</code></li><li>如果显示 <strong>ARM64</strong> 则选择 <code>arm64</code></li></ul></li><li><p><code>WSA release type</code> 建议选择 <code>insider fast</code></p></li><li><p><code>Magisk version</code> 建议选择 <code>stable</code></p></li><li><p>其他选项根据需求选择</p></li></ul><ol><li><p>在 Windows 中打开路径 <code>\\\\wsl.localhost\\Ubuntu\\MagiskOnWSALocal\\output</code>，将文件夹中的压缩包解压到合适的路径（安装路径）</p></li><li><p><a href="https://github.nite07.com/cinit/WSAPatch/releases/download/r2022.12.10/patch-20221210.7z" target="_blank" rel="noopener noreferrer">下载 Patch 文件</a>并解压，将 <strong>icu.dll</strong> 和 <strong>WsaPatch.dll</strong> 复制到 <code>&lt;第4步解压的文件夹&gt;\\WsaClient</code></p></li><li><p>编辑</p></li></ol><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" data-title="plain" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>&lt;第4步解压的文件夹&gt;\\AppxManifest.xml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><p>在 <code>AppxManifest.xml</code> 找到 <code>TargetDeviceFamily</code> 节点</p><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" data-title="plain" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>&lt;TargetDeviceFamily Name=&quot;Windows.Desktop&quot; MinVersion=&quot;10.0.22000.120&quot; MaxVersionTested=&quot;10.0.22000.120&quot;/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>把 MinVersion 从 10.0.22000.120 改成 10.0.19045.2311</p></li><li><p>在 <code>AppxManifest.xml</code> 删除 <code>customInstall</code> 相关节点，一共有两个</p><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" data-title="plain" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>&lt;rescap:Capability Name=&quot;customInstallActions&quot;/&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" data-title="xml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">desktop6:Extension</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Category</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;windows.customInstall&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">desktop6:CustomInstall</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Folder</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;CustomInstall&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> desktop8:RunAsUser</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;true&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">desktop6:RepairActions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">desktop6:RepairAction</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> File</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;WsaSetup.exe&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Repair&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Arguments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;repair&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">desktop6:RepairActions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">desktop6:UninstallActions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">            &lt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">desktop6:UninstallAction</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> File</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;WsaSetup.exe&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Uninstall&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> Arguments</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;uninstall&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">desktop6:UninstallActions</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    &lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">desktop6:CustomInstall</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;/</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">desktop6:Extension</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><ol start="7"><li>运行 <code>&lt;第4步解压的文件夹&gt;\\Run.bat</code></li></ol><h2 id="实用工具" tabindex="-1"><a class="header-anchor" href="#实用工具"><span>实用工具</span></a></h2><p><a href="https://apps.microsoft.com/store/detail/wsa%E5%B7%A5%E5%85%B7%E7%AE%B1/9PPSP2MKVTGT?hl=zh-cn&amp;gl=cn" target="_blank" rel="noopener noreferrer">WSA 工具箱</a></p><h2 id="连接-windows-代理" tabindex="-1"><a class="header-anchor" href="#连接-windows-代理"><span>连接 Windows 代理</span></a></h2><p>设置代理</p><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" data-title="plain" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>adb shell &quot;ip route list match 0 table all scope global | cut -F3&quot; # 获取IP</span></span>
<span class="line"><span>adb shell &quot;settings put global http_proxy &lt;ip&gt;:&lt;端口&gt;&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>关闭代理(无需重启)</p><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" data-title="plain" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>adb shell settings put global http_proxy :0</span></span>
<span class="line"><span>adb shell settings delete global http_proxy</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考文章" tabindex="-1"><a class="header-anchor" href="#参考文章"><span>参考文章</span></a></h2><p><a href="https://github.com/cinit/WSAPatch/blob/main/README_zhs.md" target="_blank" rel="noopener noreferrer">适用于 Windows 10 的 WSA 补丁</a><a href="https://github.com/LSPosed/MagiskOnWSALocal" target="_blank" rel="noopener noreferrer">Magisk on WSA (with Google Apps)</a></p>`,23)]))}const r=s(n,[["render",l],["__file","Windows10安装WSA.html.vue"]]),h=JSON.parse('{"path":"/linux/Windows10%E5%AE%89%E8%A3%85WSA.html","title":"Windows 10 安装 WSA","lang":"zh-CN","frontmatter":{"author":"xlc520","title":"Windows 10 安装 WSA","excerpt":null,"description":"Windows 10 安装 WSA 简介 Windows Subsystem for Android （官方中文译名：适用于 Android™️ 的 Windows 子系统）包括 Linux 内核和基于 Android 开源项目（AOSP）版本的 Android 操作系统。该子系统在 Hyper-V 虚拟机中运行，可以将 AOSP 环境中 App 的运...","date":"2023-01-30T00:00:00.000Z","category":"Linux","tag":["Linux","Windows 10","WSA"],"article":true,"timeline":true,"icon":"linux","head":[["meta",{"property":"og:url","content":"https://blog.ciberviler.top/linux/Windows10%E5%AE%89%E8%A3%85WSA.html"}],["meta",{"property":"og:site_name","content":"StudyNote - 丰富的知识笔记库"}],["meta",{"property":"og:title","content":"Windows 10 安装 WSA"}],["meta",{"property":"og:description","content":"Windows 10 安装 WSA 简介 Windows Subsystem for Android （官方中文译名：适用于 Android™️ 的 Windows 子系统）包括 Linux 内核和基于 Android 开源项目（AOSP）版本的 Android 操作系统。该子系统在 Hyper-V 虚拟机中运行，可以将 AOSP 环境中 App 的运..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-27T13:32:36.000Z"}],["meta",{"property":"article:author","content":"xlc520"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:tag","content":"Windows 10"}],["meta",{"property":"article:tag","content":"WSA"}],["meta",{"property":"article:published_time","content":"2023-01-30T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-27T13:32:36.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Windows 10 安装 WSA\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-01-30T00:00:00.000Z\\",\\"dateModified\\":\\"2024-04-27T13:32:36.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xlc520\\"}]}"]]},"headers":[{"level":2,"title":"简介","slug":"简介","link":"#简介","children":[]},{"level":2,"title":"步骤","slug":"步骤","link":"#步骤","children":[]},{"level":2,"title":"实用工具","slug":"实用工具","link":"#实用工具","children":[]},{"level":2,"title":"连接 Windows 代理","slug":"连接-windows-代理","link":"#连接-windows-代理","children":[]},{"level":2,"title":"参考文章","slug":"参考文章","link":"#参考文章","children":[]}],"git":{"createdTime":1675495385000,"updatedTime":1714224756000,"contributors":[{"name":"xlc520","email":"2215400217@qq.com","commits":2},{"name":"xlc","email":"2215400217@qq.com","commits":1}]},"readingTime":{"minutes":2.98,"words":895},"filePathRelative":"linux/Windows10安装WSA.md","localizedDate":"2023年1月30日","excerpt":"\\n<h2>简介</h2>\\n<p>Windows Subsystem for Android （官方中文译名：适用于 Android™️ 的 Windows 子系统）包括 Linux 内核和基于 Android\\n开源项目（AOSP）版本的 Android 操作系统。该子系统在 Hyper-V 虚拟机中运行，可以将 AOSP 环境中 App 的运行时和 API 映射到\\nWindows 图形层、内存缓冲区、输入模式、物理和虚拟设备以及传感器 ，已现身微软商店，需要 8GB 内存并推荐 16GB 配置，可在 ARM64 或\\nx64 处理器以及英特尔、AMD、高通的 CPU 上运行。\\n目前只有 Windows11 可以通过微软应用商店直接安装 WSA，Windows10 的用户可以按照本文的步骤安装。</p>","autoDesc":true}');export{r as comp,h as data};
