import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as r,c,b as t,n as s,g,r as a,a as p}from"./app-DWXdHMII.js";const n={};function b(d,e){const o=a("VPBanner"),i=a("Share");return r(),c("div",null,[t(o,s(g({title:"基于Cloudflare R2搭建图床",content:"基于Cloudflare R2搭建图床",logo:null,color:"var(--banner-text)",background:"rgba(217, 244, 208, 0.5)",actions:[{text:"基于Cloudflare R2搭建图床",link:"/other/基于Cloudflare R2搭建图床"}]})),null,16),e[0]||(e[0]=p('<h1 id="基于cloudflare-r2搭建图床" tabindex="-1"><a class="header-anchor" href="#基于cloudflare-r2搭建图床"><span>基于Cloudflare R2搭建图床</span></a></h1><p>R2。这是一款兼容 S3 API 的免费云存储服务，它允许用户在全球范围内的分布式网络上存储和检索数据。R2以“零流量费用对象存储”为卖点，宣称是对象存储最便宜的选择。相比其他云存储服务，R2在数据访问时不计算流量费用，仅根据存储总量和操作次数计费。你就说墙内哪家云厂商敢这么干吧！</p><p>另外R2的存储网络横跨100多个国家中的275个城市，利用Cloudflare庞大的内容交付网络（CDN）实现数据的全球分发和快速访问。同时还可以与Cloudflare Workers原生集成，允许用户轻松执行身份验证、路由请求，并在Cloudflare的边缘网络上部署边缘函数。</p><h2 id="🦄-免费套餐" tabindex="-1"><a class="header-anchor" href="#🦄-免费套餐"><span>🦄 免费套餐</span></a></h2><p>按照CF官网的介绍，每个CF账号都可以免费使用R2服务，当然免费是有些限制的，每月10GB以内存储免费，另带每月100W次A类操作和每月1000W次B类操作。A类操作主要是写操作，B类型主要就是读取操作，我们日常访问R2里面的内容就是B类，1000W对于个人日常使用完全足够了，另外还可以配合CF的缓存，使用量会更少！ <img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-0.webp" alt="图片" loading="lazy"></p><h2 id="🦌-操作方法" tabindex="-1"><a class="header-anchor" href="#🦌-操作方法"><span>🦌 操作方法</span></a></h2><p>使用R2的前提是你得先注册好CF账号（选择Free套餐就行），并且最好在CF上解析一个自己的域名。</p><h3 id="_1️⃣-创建存储桶" tabindex="-1"><a class="header-anchor" href="#_1️⃣-创建存储桶"><span>1️⃣ 创建存储桶</span></a></h3><p>在左边菜单中找到<code>R2</code>，打开概述，点击右上角的<code>创建存储桶</code><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-1.webp" alt="图片" loading="lazy"></p><blockquote><p>填写存储桶的名称，选择存储桶的位置（建议放在访问量最多的区域，比如你的用户在美丽国比较多，就选北美洲），默认存储类直接选标准就行。</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-2.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><h3 id="_2️⃣-设置存储桶" tabindex="-1"><a class="header-anchor" href="#_2️⃣-设置存储桶"><span>2️⃣ 设置存储桶</span></a></h3><blockquote><p>创建完以后回到概述页面，打开刚刚创建好的桶，点击<code>设置</code>。</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-3.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><blockquote><p>往下拉，找到<code>公开访问</code>板块，点击<code>连接域</code>，我们给这个桶套一个自己的域名。</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-4.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><blockquote><p>输入你自己的二级域名，比如<code>imghub.yourdomain.com</code>，点<code>继续</code>按钮。</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-5.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><blockquote><p>等待片刻后，CF就会自动在DNS的记录中增加一个类型为R2的解析记录，这是CF自己内部专属的，可以不用管他，总之现在就可以使用这个域名访问你在R2中存储的图片了。</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-6.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><h3 id="_3️⃣-设置缓存" tabindex="-1"><a class="header-anchor" href="#_3️⃣-设置缓存"><span>3️⃣ 设置缓存</span></a></h3><p>R2每月有1000W免费读取次数，如果你不放心，可以再增加一层缓存，既可以减少回源读取次数，又能加速访问速度，一箭双雕！CF每个域名支持免费设置10条缓存规则，一般来说都够用了，稍微使用点技巧也用不了几条。</p><blockquote><p>在菜单中找到<code>缓存</code>，打开<code>Cache Rule</code>，点击<code>创建规则</code>。</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-7.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><blockquote><p>输入规则名称（随意），设置匹配规则，这里我们直接设置为主机名是你上文设置的那个域名即可。当然匹配规则还有很多其他的维度可以选，支持等于、包含、开头、结尾等运算符，按自己实际要走CDN的资源设置即可。</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-8.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><blockquote><p>继续往下拉，在缓存资格中选择<code>符合缓存条件</code>；在边缘TTL种点击<code>添加设置</code>，然后选择<code>忽略缓存控制标头，使用次TTL</code> ，然后在<code>输入生存时间(TTL)</code>中选择一个时间，免费账号支持最短2小时、最长1年，最为图床的话建议越大越好，尽量减少回源，也就是减少R2存储桶的B类操作次数。</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-9.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><blockquote><p>最后拉到页面最底部，点击<code>部署</code>，等待30秒即可生效，从此你的图床就是跑在CDN上面了。</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-10.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><h3 id="_4️⃣-上传图片" tabindex="-1"><a class="header-anchor" href="#_4️⃣-上传图片"><span>4️⃣ 上传图片</span></a></h3><p>笔者说搭建图床，当然指的是在R2中管理图片，但并不是说R2中只能存储图片，这个并没什么限制，希望不要误解。</p><p>现在图床搭建好了，该怎么传图片上去呢？文章开头提到，R2是一个兼容S3的云存储服务，我们可以直接使用现有的支持S3的工具上传即可；当然，如果你不嫌麻烦，也可以直接在R2的存储桶界面上传。 <img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-11.webp" alt="图片" loading="lazy"></p><h4 id="使用picgo上传" tabindex="-1"><a class="header-anchor" href="#使用picgo上传"><span>使用PicGO上传</span></a></h4><blockquote><p>在存储桶的设置界面，查看桶所在的位置，比如亚太地区就是<code>APAC</code>，记录下来后门会用到。</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-12.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><blockquote><p>在账号ID下面有个<code>管理R2 API令牌</code>按钮，点击去，然后点击<code>创建API令牌</code>。</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-13.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><blockquote><p>在创建页面输入令牌名称，权限选择<code>对象读和写</code>即可，其他的保持默认，最后确认创建。</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-14.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><blockquote><p>然后就会在页面上显示这个令牌的相关信息，注意令牌值、访问密钥 ID和机密访问密钥只会显示一次，关闭这个页面以后就看不到了，建议单独记录下来，并且不要把这些分享给其他人！</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-15.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><blockquote><p>接着在PicGO的插件设置中搜索<code>S3</code>，安装S3插件</p></blockquote><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-16.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><blockquote><p>插件安装完成后，开始配置了。分别填写应用密钥ID、应用密钥、桶名、文件路径、自定义域名，其他的可以不填或者按自己实际情况填。设置完成后就可以正常上传图片了。</p></blockquote><p>字段的对应关系如下表：</p><table><thead><tr><th>插件字段</th><th>CF字段或含义</th></tr></thead><tbody><tr><td>应用密钥ID</td><td>访问密钥ID</td></tr><tr><td>应用密钥</td><td>机密访问密钥</td></tr><tr><td>桶名</td><td>R2存储桶名称</td></tr><tr><td>文件路径</td><td>保持默认或自己定义</td></tr><tr><td>自定义域名</td><td>你的R2默认域名或上文设置的自定义域名</td></tr></tbody></table><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227989-17.webp" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><p>以上是使用PicGO上传图片到R2的简单介绍，如果你使用其他S3兼容的工具，基本都差不多，笔者也没接触过太多，就不再展开了，关于基于R2搭建图床的教程就介绍到这里。</p>',49)),t(i,{colorful:"",service:"email,qq,qzone,qrcode,weibo,telegram,twitter"})])}const h=l(n,[["render",b],["__file","基于Cloudflare R2搭建图床.html.vue"]]),f=JSON.parse('{"path":"/other/%E5%9F%BA%E4%BA%8ECloudflare%20R2%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BA%8A.html","title":"基于Cloudflare R2搭建图床","lang":"zh-CN","frontmatter":{"title":"基于Cloudflare R2搭建图床","excerpt":null,"description":"基于Cloudflare R2搭建图床","date":"2024-08-10T00:00:00.000Z","category":"other","tag":"other","author":"xlc520","article":true,"timeline":true,"icon":"others","head":[["meta",{"property":"og:url","content":"https://blog.ciberviler.top/other/%E5%9F%BA%E4%BA%8ECloudflare%20R2%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BA%8A.html"}],["meta",{"property":"og:site_name","content":"StudyNote - 丰富的知识笔记库"}],["meta",{"property":"og:title","content":"基于Cloudflare R2搭建图床"}],["meta",{"property":"og:description","content":"基于Cloudflare R2搭建图床"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-0.webp"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-09-07T06:25:19.000Z"}],["meta",{"property":"article:author","content":"xlc520"}],["meta",{"property":"article:tag","content":"other"}],["meta",{"property":"article:published_time","content":"2024-08-10T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-09-07T06:25:19.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"基于Cloudflare R2搭建图床\\",\\"image\\":[\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-0.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-1.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-2.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-3.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-4.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-5.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-6.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-7.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227987-8.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-9.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-10.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-11.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-12.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-13.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-14.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-15.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227988-16.webp\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images/2024/640-1723299227989-17.webp\\"],\\"datePublished\\":\\"2024-08-10T00:00:00.000Z\\",\\"dateModified\\":\\"2024-09-07T06:25:19.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xlc520\\"}]}"]]},"headers":[{"level":2,"title":"🦄 免费套餐","slug":"🦄-免费套餐","link":"#🦄-免费套餐","children":[]},{"level":2,"title":"🦌 操作方法","slug":"🦌-操作方法","link":"#🦌-操作方法","children":[{"level":3,"title":"1️⃣ 创建存储桶","slug":"_1️⃣-创建存储桶","link":"#_1️⃣-创建存储桶","children":[]},{"level":3,"title":"2️⃣ 设置存储桶","slug":"_2️⃣-设置存储桶","link":"#_2️⃣-设置存储桶","children":[]},{"level":3,"title":"3️⃣ 设置缓存","slug":"_3️⃣-设置缓存","link":"#_3️⃣-设置缓存","children":[]},{"level":3,"title":"4️⃣ 上传图片","slug":"_4️⃣-上传图片","link":"#_4️⃣-上传图片","children":[]}]}],"git":{"createdTime":1725690319000,"updatedTime":1725690319000,"contributors":[{"name":"xlc","email":"2215400217@qq.com","commits":1}]},"readingTime":{"minutes":5.77,"words":1730},"filePathRelative":"other/基于Cloudflare R2搭建图床.md","localizedDate":"2024年8月10日","excerpt":""}');export{h as comp,f as data};
