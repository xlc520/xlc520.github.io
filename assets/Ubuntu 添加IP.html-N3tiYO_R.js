import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as n,o as l,c as i,b as e,n as o,g as p,a as c}from"./app-Clq2mtAP.js";const d={},u=c(`<h1 id="ubuntu-添加ip" tabindex="-1"><a class="header-anchor" href="#ubuntu-添加ip"><span>Ubuntu 添加IP</span></a></h1><p>在Ubuntu 22.04中，持久化网络配置通常是通过编辑<code>/etc/netplan/</code>目录下的YAML配置文件来完成的。</p><h2 id="持久化配置" tabindex="-1"><a class="header-anchor" href="#持久化配置"><span><strong>持久化配置</strong></span></a></h2><p>以下是添加一个新的IP地址和网关并使其在系统重启后仍然有效的步骤：</p><ol><li><p><strong>打开终端</strong>：</p><ul><li>使用快捷键<code>Ctrl + Alt + T</code>打开终端。</li></ul></li><li><p><strong>编辑网络配置文件</strong>：</p><ul><li><p>使用文本编辑器（如<code>nano</code>或<code>vim</code>）打开网络接口配置文件。例如：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/netplan/00-installer-config.yaml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>如果文件名不同，请根据实际情况替换文件名。</p></li></ul></li><li><p><strong>添加或修改IP配置</strong>：</p><ul><li><p>在配置文件中，找到你的网络接口配置部分。它应该看起来像这样：</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">network</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">renderer</span><span class="token punctuation">:</span> networkd
  <span class="token key atrule">ethernets</span><span class="token punctuation">:</span>
    <span class="token key atrule">ens33</span><span class="token punctuation">:</span>
      <span class="token key atrule">addresses</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>192.168.1.100/24<span class="token punctuation">]</span>
      <span class="token key atrule">gateway4</span><span class="token punctuation">:</span> 192.168.1.1
      <span class="token key atrule">nameservers</span><span class="token punctuation">:</span>
        <span class="token key atrule">addresses</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>8.8.8.8<span class="token punctuation">,</span> 8.8.4.4<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>添加或修改<code>addresses</code>字段来包含你想要的新IP地址。例如，添加一个新的IP地址<code>192.168.1.101/24</code>：</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">network</span><span class="token punctuation">:</span>
  <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">renderer</span><span class="token punctuation">:</span> networkd
  <span class="token key atrule">ethernets</span><span class="token punctuation">:</span>
    <span class="token key atrule">ens33</span><span class="token punctuation">:</span>
      <span class="token key atrule">addresses</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>192.168.1.100/24<span class="token punctuation">,</span> 192.168.1.101/24<span class="token punctuation">]</span>
      <span class="token key atrule">gateway4</span><span class="token punctuation">:</span> 192.168.1.1
      <span class="token key atrule">nameservers</span><span class="token punctuation">:</span>
        <span class="token key atrule">addresses</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>8.8.8.8<span class="token punctuation">,</span> 8.8.4.4<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>如果你需要添加新的网关，确保它是在<code>gateway4</code>字段中指定的。</p></li></ul></li><li><p><strong>应用更改</strong>：</p><ul><li><p>保存文件并退出编辑器。</p></li><li><p>应用新的网络配置：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> netplan apply
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li><li><p><strong>验证配置</strong>：</p><ul><li><p>使用以下命令验证IP地址和网关是否已经正确添加：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">ip</span> addr show dev ens33
<span class="token function">ip</span> route show
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>第一个命令将显示<code>ens33</code>接口上的所有IP地址，第二个命令将显示当前的路由表。</p></li></ul></li><li><p><strong>重启网络服务</strong>（可选）：</p><ul><li><p>如果需要，你可以重启网络服务以确保更改立即生效：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> netplan apply
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li></ol><h2 id="命令配置" tabindex="-1"><a class="header-anchor" href="#命令配置"><span>命令配置</span></a></h2><p>以下是使用<code>ip</code>命令来完成这个任务的步骤：</p><ol><li><p><strong>打开终端</strong>：</p><ul><li>使用快捷键<code>Ctrl + Alt + T</code>打开终端。</li></ul></li><li><p><strong>查看当前网络接口</strong>：</p><ul><li><p>首先，你需要知道你的网络接口名称。使用以下命令查看当前的网络接口：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">ip</span> addr
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>通常，以太网接口的名称是<code>eth0</code>、<code>ens33</code>等，无线接口可能是<code>wlan0</code>。</p></li></ul></li><li><p><strong>添加新的IP地址</strong>：</p><ul><li><p>使用<code>ip</code>命令添加一个新的IP地址。以下是一个示例命令，假设你的网络接口是<code>ens33</code>：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">ip</span> addr <span class="token function">add</span> <span class="token number">192.168</span>.1.101/24 dev ens33
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>这个命令将把<code>192.168.1.101/24</code>这个IP地址添加到<code>ens33</code>接口上。</p></li></ul></li><li><p><strong>添加网关</strong>：</p><ul><li><p>使用<code>ip</code>命令添加网关。以下是一个示例命令，假设你的网关是<code>192.168.1.1</code>：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">ip</span> route <span class="token function">add</span> default via <span class="token number">192.168</span>.1.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>这个命令将设置<code>192.168.1.1</code>作为默认网关。</p></li></ul></li><li><p><strong>验证配置</strong>：</p><ul><li><p>使用以下命令验证IP地址和网关是否已经正确添加：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">ip</span> addr show dev ens33
<span class="token function">ip</span> route show
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>第一个命令将显示<code>ens33</code>接口上的所有IP地址，第二个命令将显示当前的路由表。</p></li></ul></li></ol>`,8);function r(m,v){const a=n("VPBanner"),s=n("Share");return l(),i("div",null,[e(a,o(p({title:"Ubuntu 添加IP",content:"Ubuntu 添加IP",logo:null,color:"var(--banner-text)",background:"rgba(217, 244, 208, 0.5)",actions:[{text:"Ubuntu 添加IP",link:"/Ubuntu 添加IP/"}]})),null,16),u,e(s,{colorful:"",service:"email,qq,qzone,qrcode,weibo,telegram,twitter"})])}const g=t(d,[["render",r],["__file","Ubuntu 添加IP.html.vue"]]),h=JSON.parse('{"path":"/linux/Ubuntu%20%E6%B7%BB%E5%8A%A0IP.html","title":"Ubuntu 添加IP","lang":"zh-CN","frontmatter":{"title":"Ubuntu 添加IP","excerpt":null,"description":"Ubuntu 添加IP","date":"2024-05-17T00:00:00.000Z","category":"Linux","tag":"Linux","author":"xlc520","article":true,"timeline":true,"icon":"linux","head":[["meta",{"property":"og:url","content":"https://blog.ciberviler.top/linux/Ubuntu%20%E6%B7%BB%E5%8A%A0IP.html"}],["meta",{"property":"og:site_name","content":"StudyNote - 丰富的知识笔记库"}],["meta",{"property":"og:title","content":"Ubuntu 添加IP"}],["meta",{"property":"og:description","content":"Ubuntu 添加IP"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-18T10:09:38.000Z"}],["meta",{"property":"article:author","content":"xlc520"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:published_time","content":"2024-05-17T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-05-18T10:09:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Ubuntu 添加IP\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-05-17T00:00:00.000Z\\",\\"dateModified\\":\\"2024-05-18T10:09:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xlc520\\"}]}"]]},"headers":[{"level":2,"title":"持久化配置","slug":"持久化配置","link":"#持久化配置","children":[]},{"level":2,"title":"命令配置","slug":"命令配置","link":"#命令配置","children":[]}],"git":{"createdTime":1716026978000,"updatedTime":1716026978000,"contributors":[{"name":"xlc","email":"2215400217@qq.com","commits":1}]},"readingTime":{"minutes":2.54,"words":763},"filePathRelative":"linux/Ubuntu 添加IP.md","localizedDate":"2024年5月17日"}');export{g as comp,h as data};
