import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as p,o,c,b as s,d as n,e as l,a}from"./app-CXNU22eb.js";const i={},u=a(`<h1 id="list-extends-t-与-list-super-t-的区别" tabindex="-1"><a class="header-anchor" href="#list-extends-t-与-list-super-t-的区别"><span>List&lt;? extends T&gt;与 List&lt;? super T&gt;的区别</span></a></h1><p><strong>List&lt;? extends T&gt;与 List&lt;? super T&gt;的区别</strong></p><p>这个问题，初级工程师在做面试题时会出现。高级工程师很少会遇到，但实际上，不少工作了 5 年左右的工程师也回答的不是很好。基于此，整理了本文，分享给大家！</p><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images3/640-1697803438447-0.jpeg" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><p>我们先来看一下名词解释：</p><h2 id="_1" tabindex="-1"><a class="header-anchor" href="#_1"><span>1）<code>？</code></span></a></h2><p>？表示类型通配符，即具体传什么参数类型，在 List 定义时不用考虑。</p><h2 id="_2-t" tabindex="-1"><a class="header-anchor" href="#_2-t"><span>2）<code>&lt;T&gt;</code></span></a></h2><p>这里的 <code>&lt;&gt;</code> 表示泛型，T 表示泛型中装载的类型为 T 类型，等到需要的时候，我们可以具体这个 T。我们在使用动态数组实现 ArrayList 的时候，如果希望这个 ArrayList 不仅仅支持一个类型的话，我们可以给这个 ArrayList 定义泛型，泛型中存放的是 T 类型。在实际创建出这个 ArrayList 对象时，我们可以指定泛型中的具体类型。</p><h2 id="_3-extends-t" tabindex="-1"><a class="header-anchor" href="#_3-extends-t"><span>3）<code>&lt;? extends T&gt;</code></span></a></h2><p>类型上界，这里的 ? 可以是 T 类型或者 T 的子类类型。</p><h2 id="_4-super-t" tabindex="-1"><a class="header-anchor" href="#_4-super-t"><span>4）<code>&lt;? super T&gt;</code></span></a></h2><p>类型下界，这里的?可以是 T 类型或者 T 的超类类型，但不代表我们可以往里面添加任意超类类型的元素。 <img src="https://bitbucket.org/xlc520/blogasset/raw/main/images3/640-1697803438447-1.png" alt="图片" loading="lazy"></p><p><strong>在 List 中引入通配符界限限制的假设</strong></p><p>不管是<code>List&lt;? extends T&gt;</code>还是<code>List&lt;? super T&gt;</code>，如果能读取元素，那么这个元素一定能转化为 T 类型，注意不是强制类型转换，强制类型转换是容易出现问题。</p><p>显然<code>List&lt;? extends T&gt;</code>内都是 T 的子类类型，能够向上转型为 T 类型，因此该 list 可以读取。</p><p>而<code>List&lt;? super T&gt;</code>内可以是 T 的超类类型，T 的超类转 T 是有可能出现异常的。</p><p>那我干脆转化成 Object 类型不好吗，所有类的基类都是 Object，不属于强制类型转换。哥们，转换成 Object 了，那你还图个啥？转换为 Object 类型是没有意义的。</p><p>假设<code>List&lt;? extends T&gt;</code>能添加元素，那么需要满足添加的任意元素需要能够直接转化成 T 的任何一个子类，T 的子类 A 和子类 B 是不能相互转化的，显然该 list 是不能添加元素的。</p><p>假设<code>List&lt;? super T&gt;</code>能添加元素，那么同样需要满足添加的任意元素能够直接转化成 T 的任何一个超类。此时添加 T 的子类元素就能满足该要求，因为 T 的任意子类可以向上转型成 T 的任何超类。</p><p><strong>List&lt;? extends T&gt;</strong></p><p><code>List&lt;? extends T&gt;</code>是被设计用来读取数据的泛型，并且只能读取类型为 T 的元素。原因如下：</p><p>元素是可以进行向上转型的，因此，我们可以这样做来读取元素。</p><div class="language-plain line-numbers-mode" data-ext="plain" data-title="plain"><pre class="language-plain"><code>List&lt;? extends Number&gt; list = new ArrayList&lt;&gt;(); 
Number number = list.get(0);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>可以读取，但不能写入，比如以下的代码就直接报错。</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//编译报错</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//编译报错</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//编译报错</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A 的子类 B 与子类 C 是不能相互转换的，因此是不能往该 list 中添加元素。</p><p>虽然不能添加元素，但可以在初始化的时候，接受一个已经定义好的 list，而该 list 存放的类型一定相同。因此，<code>List&lt;? extends T&gt;</code> 可直接接受一个定义好的 list。</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> list<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ....</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token operator">=</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>List&lt;? super T&gt;</strong></p>`,30),d=s("code",null,"List<? super T>",-1),r={href:"https://www.yoodb.com",target:"_blank",rel:"noopener noreferrer"},k=a(`<p>为什么只能是 T 类型及其子类型元素，超类类型的元素不可以吗？</p><p>超类类型转化为 T 类型，是需要强制类型转换的，是容易出现异常的，无法保障的。</p><p>而传入 T 类型及其子类类型时，能够直接转化为 T 的任意超类类型。比如，下面的代码是可以运行的</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">A</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>该 list 也可以读取其中的元素，从第二节可以得出，只能用 Object 接收，没多大意义。</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Object</span> integer<span class="token operator">=</span>list2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果我们使用 Object 类型来接收获取到的元素，那么元素本身的类型就会丢失，因此，我们不使用<code>List&lt;? super T&gt;</code>来获取元素。</p><p>如果我们非要使用<code>List&lt;? super Integer&gt;</code>中的 Integer 类型来接收获取到的元素，那么必须进行强制类型转换，是会出现异常的，无法保障。</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Integer</span> integer1<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span> list2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>总结</strong></p><p>（1）<code>List&lt;? extends T&gt;</code>适用于读取数据，读取出来的数据全部用 T 类型接收。如果我们往此 list 中添加 T 类型不同的子类的话，各种子类无法相互转换，因此不能添加元素，但可接受初始赋值。公众 号 Java 精选，回复 java 面试，获取面试资料，支持在线刷题。</p><p>（2）<code>List&lt;? super T&gt;</code>适用于添加元素，只能添加 T 类型或其子类类型。因为这些类型都能转换为 T 的任意超类类型（向上转型），因此我们可以对此 list 添加元素。只能用 Object 类型来接收获取到的元素，但是这些元素原本的类型会丢失。</p><p><strong>更加通俗易懂的例子</strong></p><p>什么，你还没明白？那我举一些直观的例子。</p><figure><img src="https://bitbucket.org/xlc520/blogasset/raw/main/images3/640-1697803438447-2.png" alt="图片" tabindex="0" loading="lazy"><figcaption>图片</figcaption></figure><p>注意：<code>向上转型是安全的，向下转型是不安全的，除非你知道 List 中的真实类型，否则向下转型就会报错</code>。</p><h2 id="extends" tabindex="-1"><a class="header-anchor" href="#extends"><span><code>extends</code></span></a></h2><p><code>List&lt;? extends Number&gt; foo3</code>意味着下面的赋值语句都是合法的：</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span> foo3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Number &quot;extends&quot; Number (in this context)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span> foo3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Integer extends Number</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span> foo3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Double extends Number</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>读取</li></ol><p>给定上述可能的赋值语句，能保证你从<code>List foo3</code>中取出什么样类型的对象？</p><ul><li>你可以读取一个<code>Number</code>对象，因为上面任意一个 list 都包含<code>Number</code>对象或者<code>Number</code> 子类的对象（上面的 Number、Integer、Double 都可以转型成 Number，并且是安全的，所以读取总是可以的）。如下代码就不会报错：</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span> foo4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Number</span> number <span class="token operator">=</span> foo4<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>你不能读取一个<code>Integer</code>对象，因为<code>foo3</code>可能指向的是<code>List&lt;Double&gt;</code> （与其运行时发现 Double 转成 Integer 报错，不如编译时就不让从<code>foo3</code>中取<code>Integer</code> 对象）。如下代码编译时会报<code>Incompatible types</code> 错的：</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span> foo4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Integer</span> number <span class="token operator">=</span> foo4<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>因为编译的时候编译器只知道 foo4 引用是一个 List&lt;? extends Number&gt;，要到运行时才会绑定到 new ArrayList() ，所以编译的时候是无法判断 foo4 指向的 List 中到底是什么类型，唯一能确定的就是这个类型是 Number 的子类（或者就是 Number 类）。</p><ul><li>你也不能读取一个<code>Double</code>对象，因为<code>foo3</code>可能指向的是<code>List&lt;Integer&gt;</code>。</li></ul><ol><li>写入</li></ol><p>给定上述可能的赋值语句，你能往<code>List foo3</code>中添加什么类型的对象从而保证它对于所有可能的<code>ArrayList</code>都是合法的呢？</p><ul><li>你不能添加一个<code>Integer</code>对象，因为<code>foo3</code>可能指向的是<code>List&lt;Double&gt;</code>。如下代码是会编译报错的：</li></ul><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span> foo4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
foo4<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>因为编译期间是无法知道 foo4 指向的 ArrayList 中到底放的是什么类型，只有到运行时才知道（就是 Java 所谓的晚绑定或运行时绑定）。与其到运行时发现往一个 ArrayList 中 add 一个 Integer 导致抛出类型转换异常，倒不如编译时就报错，即使 ArrayList 中放的就是 Integer 类型。</p><ul><li>你不能添加一个<code>Double</code>对象，因为<code>foo3</code>可能指向的是<code>List&lt;Integer&gt;</code>。</li><li>你不能添加一个<code>Number</code>对象，因为<code>foo3</code>可能指向的是<code>List&lt;Integer&gt;</code>。</li></ul><p><strong>「总结一下」</strong>：你不能往<code>List&lt;? extends T&gt;</code>中添加任何对象，因为你不能保证<code>List</code> 真正指向哪个类型，所以不能确定添加的对象就是<code>List</code>所能接受的类型。能保证的，仅仅是你可以从<code>List</code> 中读取的时候，你获得的肯定是一个<code>T</code>类型的对象（即使是<code>T</code>类型的子类对象也是<code>T</code>类型的）。</p><h2 id="supers" tabindex="-1"><a class="header-anchor" href="#supers"><span><code>supers</code></span></a></h2><p>现在考虑<code>List&lt;? super T&gt;</code> 包含通配符的声明<code>List&lt;? super Integer&gt; foo3</code>意味着下面任何一个赋值语句都是合法的：</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> foo3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Integer is a &quot;superclass&quot; of Integer (in this context)</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> foo3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Number</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// Number is a superclass of Integer</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> foo3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// Object is a superclass of Integer</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><strong>读取</strong></li></ol><p>给定上述可能的赋值语句，当读取<code>List foo3</code>中的元素的时候，你能保证接收到什么类型的对象呢？</p><ul><li>你不能保证是一个<code>Integer</code>对象，因为<code>foo3</code>可能指向一个<code>List&lt;Number&gt;</code>或者<code>List&lt;Object&gt;</code>。</li><li>你不能保证是一个<code>Number</code>对象，因为<code>foo3</code>可能指向一个<code>List&lt;Object&gt;</code>。</li><li>你能保证的仅仅是它一定是一个<code>Object</code>类的实例或者<code>Object</code>子类的实例（但是你不知道到底是哪个子类）。</li></ul><ol><li><strong>写入</strong></li></ol><p>给定上述可能的赋值语句，你能往<code>List foo3</code>中添加什么类型的对象从而保证它对于所有可能的<code>ArrayList</code>都是合法的呢？</p><ul><li>你可以添加一个<code>Integer</code>实例，因为<code>Integer</code>类型对于上述所有的 list 都是合法的。</li><li>你可以添加任何<code>Integer</code>子类的实例，因为一个<code>Integer</code>子类的实例都可以向上转型成上面列表中的元素类型。</li><li>你不可以添加<code>Double</code>类型，因为<code>foo3</code>可能指向的是<code>ArrayList&lt;Integer&gt;</code>。</li><li>你不可以添加<code>Number</code>类型，因为<code>foo3</code>可能指向的是<code>ArrayList&lt;Integer&gt;</code>。</li><li>你不可以添加<code>Object</code>类型，因为<code>foo3</code>可能指向的是<code>ArrayList&lt;Integer&gt;</code>。</li></ul><h2 id="pecs" tabindex="-1"><a class="header-anchor" href="#pecs"><span><code>PECS</code></span></a></h2><p><code>PECS</code>是&quot;Producer Extends,Consumer Super&quot;（生产者用 Extends，消费者用 Super）的缩写。</p><ul><li>&quot;Producer Extends&quot;的意思是，如果你需要一个<code>List</code>去生产<code>T</code>类型 values（也就是说你需要去 list 中读取<code>T</code> 类型实例），你需要声明这个<code>List</code>中的元素为<code>? extends T</code>，例如<code>List&lt;? extends Integer&gt;</code>，但是你不能往里面添加元素。</li><li>&quot;Consumer Super&quot;的意思是，如果你需要一个<code>List</code>去消费<code>T</code>类型 values（也就是说你需要往 list 中添加<code>T</code> 类型实例），你需要声明这个<code>List</code>中的元素为<code>? super T</code>，例如<code>List&lt;? super Integer&gt;</code>。但是不能保证你从这个 list 中读取出来对象类型。</li><li>如果你既需要往 list 中写，也需要从 list 中读，那么你就不能用通配符<code>?</code>，必须用精确的类型，比如<code>List&lt;Integer&gt;</code>。</li><li>可以参考 JDK 源码中的 Collections 类的 copy 方法，来理解 PECS，源码在文末有。</li></ul>`,46);function m(g,v){const e=p("ExternalLinkIcon");return o(),c("div",null,[u,s("p",null,[d,n("是被设计用来添加数据的泛型，并且只能添加 T 类型或其子类类型的元素。面试宝典："),s("a",r,[n("https://www.yoodb.com"),l(e)])]),k])}const L=t(i,[["render",m],["__file","List extends T与List super T的区别.html.vue"]]),w=JSON.parse('{"path":"/dev/List%20extends%20T%E4%B8%8EList%20super%20T%E7%9A%84%E5%8C%BA%E5%88%AB.html","title":"List extends T与List super T的区别","lang":"zh-CN","frontmatter":{"author":"xlc520","title":"List extends T与List super T的区别","excerpt":null,"description":"Java","date":"2023-10-20T00:00:00.000Z","category":"Java","tag":"Java","article":true,"timeline":true,"icon":"java","head":[["meta",{"property":"og:url","content":"https://blog.ciberviler.top/dev/List%20extends%20T%E4%B8%8EList%20super%20T%E7%9A%84%E5%8C%BA%E5%88%AB.html"}],["meta",{"property":"og:site_name","content":"StudyNote"}],["meta",{"property":"og:title","content":"List extends T与List super T的区别"}],["meta",{"property":"og:description","content":"Java"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://bitbucket.org/xlc520/blogasset/raw/main/images3/640-1697803438447-0.jpeg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-27T13:32:36.000Z"}],["meta",{"property":"article:author","content":"xlc520"}],["meta",{"property":"article:tag","content":"Java"}],["meta",{"property":"article:published_time","content":"2023-10-20T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-27T13:32:36.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"List extends T与List super T的区别\\",\\"image\\":[\\"https://bitbucket.org/xlc520/blogasset/raw/main/images3/640-1697803438447-0.jpeg\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images3/640-1697803438447-1.png\\",\\"https://bitbucket.org/xlc520/blogasset/raw/main/images3/640-1697803438447-2.png\\"],\\"datePublished\\":\\"2023-10-20T00:00:00.000Z\\",\\"dateModified\\":\\"2024-04-27T13:32:36.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xlc520\\"}]}"]]},"headers":[{"level":2,"title":"1）？","slug":"_1","link":"#_1","children":[]},{"level":2,"title":"2）<T>","slug":"_2-t","link":"#_2-t","children":[]},{"level":2,"title":"3）<? extends T>","slug":"_3-extends-t","link":"#_3-extends-t","children":[]},{"level":2,"title":"4）<? super T>","slug":"_4-super-t","link":"#_4-super-t","children":[]},{"level":2,"title":"extends","slug":"extends","link":"#extends","children":[]},{"level":2,"title":"supers","slug":"supers","link":"#supers","children":[]},{"level":2,"title":"PECS","slug":"pecs","link":"#pecs","children":[]}],"git":{"createdTime":1699443587000,"updatedTime":1714224756000,"contributors":[{"name":"xlc","email":"2215400217@qq.com","commits":4}]},"readingTime":{"minutes":9.54,"words":2862},"filePathRelative":"dev/List extends T与List super T的区别.md","localizedDate":"2023年10月20日"}');export{L as comp,w as data};
