import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as t,c as e,a as n}from"./app-DWXdHMII.js";const a={};function l(p,i){return t(),e("div",null,i[0]||(i[0]=[n(`<h1 id="openresty-一键安装部署脚本" tabindex="-1"><a class="header-anchor" href="#openresty-一键安装部署脚本"><span>openresty 一键安装部署脚本</span></a></h1><p><strong>openresty 的一些核心简介：</strong></p><p>openresty 是一个成熟的网络平台，它集成了标准的 Nginx 核心，LuaJIT，许多精心编写的 Lua 库，许多高质量的第三方 Nginx 模块以及大多数外部依赖项。</p><ul><li>网站：http：//openresty.org/</li><li>Github 组织：https：//github.com/openresty</li><li>首席开发人员：@agentzh</li><li>国内最可利用的文档：</li><li><a href="http://wiki.jikexueyuan.com/project/openresty/" target="_blank" rel="noopener noreferrer">http://wiki.jikexueyuan.com/project/openresty/</a></li></ul><p><strong>一键安装部署脚本如下：</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 第一个参数为 OpenResty 的版本号VERSION=$1OPENRESTY_FILE=&quot;openresty-\${VERSION}.tar.gz&quot;OPENRESTY_URL=&quot;https://openresty.org/download/\${OPENRESTY_FILE}&quot;OPENRESTY_MD5_URL=&quot;\${OPENRESTY_URL}.md5&quot;INSTALL_DIR=&quot;/data/openresty&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 检查 OpenResty 文件是否存在if [ ! -f &quot;$OPENRESTY_FILE&quot; ]; then  echo &quot;正在下载 \${OPENRESTY_URL}...&quot;  wget &quot;$OPENRESTY_URL&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # 检查下载是否成功  if [ &quot;$?&quot; -ne 0 ]; then    echo &quot;下载 \${OPENRESTY_URL} 失败&quot;    exit 1  fifi</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 检查 OpenResty 文件的 MD5echo &quot;正在获取 \${OPENRESTY_FILE} 的 MD5 值...&quot;wget &quot;$OPENRESTY_MD5_URL&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 检查获取 MD5 文件是否成功if [ &quot;$?&quot; -ne 0 ]; then  echo &quot;获取 \${OPENRESTY_MD5_URL} 失败&quot;  exit 1fi</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 提取 MD5 值并检查是否匹配EXPECTED_MD5=$(cat &quot;\${OPENRESTY_FILE}.md5&quot; | awk &#39;{ print $1 }&#39;)ACTUAL_MD5=$(md5sum &quot;$OPENRESTY_FILE&quot; | awk &#39;{ print $1 }&#39;)if [ &quot;$EXPECTED_MD5&quot; != &quot;$ACTUAL_MD5&quot; ]; then  echo &quot;下载的 \${OPENRESTY_FILE} 文件的 MD5 值不匹配&quot;  exit 1fi</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 安装依赖yum install -y gcc make pcre-devel openssl-devel</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 解压并编译安装 OpenRestytar -xzvf &quot;$OPENRESTY_FILE&quot;cd &quot;openresty-$VERSION&quot;./configure --prefix=&quot;$INSTALL_DIR&quot;makemake install</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 检查安装是否成功if [ &quot;$?&quot; -ne 0 ]; then  echo &quot;OpenResty $VERSION 安装失败&quot;  exit 1fi</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 添加 OpenResty 到环境变量echo &#39;export PATH=$PATH:&#39;&quot;$INSTALL_DIR/bin&quot;&#39;/&#39; &gt;&gt; /etc/profilesource /etc/profile</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 创建 OpenResty 服务文件echo &quot;正在创建 OpenResty 服务文件...&quot;cat &lt;&lt;EOF &gt; /etc/systemd/system/openresty.service[Unit]Description=OpenResty HTTP ServerAfter=network.target</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[Service]</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">Type</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">forkingPIDFile</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/run/openresty.</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">pidExecStart</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$INSTALL_DIR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/nginx/sbin/nginx</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> -c</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $INSTALL_DIR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/nginx/conf/nginx.confExecReload=/bin/kill</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HUP</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MAINPIDExecStop=/bin/kill</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> QUIT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">MAINPIDPrivateTmp=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[Install]</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">WantedBy</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">multi-user.targetEOF</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 启动 OpenResty 服务systemctl daemon-reloadsystemctl enable openrestysystemctl start openresty</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;OpenResty </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$VERSION</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 已安装到 </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$INSTALL_DIR</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">，并已启动 OpenResty 服务&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以使用执行脚本后带版本号执行安装相应版本的 openresty</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install_openresty.sh</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1.19.3.1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>`,8)]))}const o=s(a,[["render",l],["__file","openresty一键安装部署脚本.html.vue"]]),k=JSON.parse('{"path":"/linux/openresty%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html","title":"openresty一键安装部署脚本","lang":"zh-CN","frontmatter":{"author":"xlc520","title":"openresty一键安装部署脚本","excerpt":null,"description":"openresty 一键安装部署脚本 openresty 的一些核心简介： openresty 是一个成熟的网络平台，它集成了标准的 Nginx 核心，LuaJIT，许多精心编写的 Lua 库，许多高质量的第三方 Nginx 模块以及大多数外部依赖项。 网站：http：//openresty.org/ Github 组织：https：//github....","date":"2023-04-10T00:00:00.000Z","category":"Linux","tag":["Linux","openresty"],"article":true,"timeline":true,"icon":"linux","head":[["meta",{"property":"og:url","content":"https://blog.ciberviler.top/linux/openresty%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC.html"}],["meta",{"property":"og:site_name","content":"StudyNote - 丰富的知识笔记库"}],["meta",{"property":"og:title","content":"openresty一键安装部署脚本"}],["meta",{"property":"og:description","content":"openresty 一键安装部署脚本 openresty 的一些核心简介： openresty 是一个成熟的网络平台，它集成了标准的 Nginx 核心，LuaJIT，许多精心编写的 Lua 库，许多高质量的第三方 Nginx 模块以及大多数外部依赖项。 网站：http：//openresty.org/ Github 组织：https：//github...."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-27T13:32:36.000Z"}],["meta",{"property":"article:author","content":"xlc520"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:tag","content":"openresty"}],["meta",{"property":"article:published_time","content":"2023-04-10T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-27T13:32:36.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"openresty一键安装部署脚本\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-04-10T00:00:00.000Z\\",\\"dateModified\\":\\"2024-04-27T13:32:36.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xlc520\\"}]}"]]},"headers":[],"git":{"createdTime":1681887867000,"updatedTime":1714224756000,"contributors":[{"name":"xlc","email":"2215400217@qq.com","commits":1},{"name":"xlc520","email":"2215400217@qq.com","commits":1}]},"readingTime":{"minutes":1.53,"words":459},"filePathRelative":"linux/openresty一键安装部署脚本.md","localizedDate":"2023年4月10日","excerpt":"\\n<p><strong>openresty 的一些核心简介：</strong></p>\\n<p>openresty 是一个成熟的网络平台，它集成了标准的 Nginx 核心，LuaJIT，许多精心编写的 Lua 库，许多高质量的第三方 Nginx\\n模块以及大多数外部依赖项。</p>","autoDesc":true}');export{o as comp,k as data};
