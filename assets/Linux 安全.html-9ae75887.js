import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{o as n,c as a,a as e}from"./app-e33eb8d4.js";const i={},c=e(`<h2 id="linux-安全" tabindex="-1"><a class="header-anchor" href="#linux-安全" aria-hidden="true">#</a> Linux 安全</h2><h3 id="_1-bootloader配置权限检查" tabindex="-1"><a class="header-anchor" href="#_1-bootloader配置权限检查" aria-hidden="true">#</a> 1.bootloader配置权限检查</h3><p>检测类型：bootloader配置权限</p><p>风险等级：中危</p><p>风险描述：以下关键文件或目录权限错误:<code>/boot/grub/grub.cfg</code> 当前权限: 444 : root 安全权限: 600 : root</p><p>解决方案：</p><p>1、对【<code>/boot/grub2/grub.cfg</code>】文件，配置对应权限 2、</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> <span class="token number">600</span> /boot/grub2/grub.cfg

<span class="token function">chown</span> root /boot/grub2/grub.cfg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-ssh-空闲超时时间检测" tabindex="-1"><a class="header-anchor" href="#_2-ssh-空闲超时时间检测" aria-hidden="true">#</a> 2.SSH 空闲超时时间检测</h3><p>检测类型：SSH 空闲超时时间检测</p><p>风险等级：中危</p><p>风险描述：当前SSH空闲超时时间为：0，请设置为600-900</p><p>解决方案：</p><p>1、在【<code>/etc/ssh/sshd_config</code>】文件中设置【<code>ClientAliveInterval</code>】设置为600到900之间 2、提示：SSH空闲超时时间建议为：600-900</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vi</span> /etc/ssh/sshd_config
ClientAliveInterval <span class="token number">900</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-检查重要文件是否存在suid和sgid权限" tabindex="-1"><a class="header-anchor" href="#_3-检查重要文件是否存在suid和sgid权限" aria-hidden="true">#</a> 3.检查重要文件是否存在suid和sgid权限</h3><p>检测类型：检查拥有suid和sgid权限的文件</p><p>风险等级：中危</p><p>风险描述：以下文件存在sid特权，chmod u-s或g-s去除sid位：&quot;/usr/bin/chage、/usr/bin/gpasswd、/usr/bin/wall、/usr/bin/chfn、/usr/bin/chsh、/usr/bin/newgrp、/bin/mount、/bin/umount&quot;</p><p>解决方案：</p><p>1、使用<code>chmod u-s/g-s</code> 【文件名】命令修改文件的权限</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chmod</span> u-s/g-s /usr/bin/chage
<span class="token function">chmod</span> u-s/g-s /usr/bin/gpasswd
<span class="token function">chmod</span> u-s/g-s /usr/bin/wall
<span class="token function">chmod</span> u-s/g-s /usr/bin/chfn
<span class="token function">chmod</span> u-s/g-s /usr/bin/chsh
<span class="token function">chmod</span> u-s/g-s /usr/bin/newgrp
<span class="token function">chmod</span> u-s/g-s /bin/mount
<span class="token function">chmod</span> u-s/g-s /bin/umount
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-检查ssh密码失效时间" tabindex="-1"><a class="header-anchor" href="#_4-检查ssh密码失效时间" aria-hidden="true">#</a> 4.检查SSH密码失效时间</h3><p>检测类型：检查SSH密码失效时间</p><p>风险等级：中危</p><p>风险描述：【/etc/login.defs】文件中把PASS_MAX_DAYS设置为90-180之间</p><p>解决方案：</p><p>1、【/etc/login.defs】 使用非密码登陆方式密钥对。请忽略此项, 在/etc/login.defs 中将PASS_MAX_DAYS 参数设置为90-180之间 2、PASS_MAX_DAYS 90 需同时执行命令设置root密码到期时间 命令如下: <code>chage --maxdays 90 root</code></p><h3 id="_5-检查是否设置无操作超时退出" tabindex="-1"><a class="header-anchor" href="#_5-检查是否设置无操作超时退出" aria-hidden="true">#</a> 5.检查是否设置无操作超时退出</h3><p>检测类型：检查是否设置命令行界面超时退出</p><p>风险等级：中危</p><p>风险描述：未配置命令行超时退出</p><p>解决方案：</p><p>1、在文件【/etc/profile】中添加tmout=300，等保要求不大于600秒 2、执行命令source /etc/profile使配置生效</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vi</span> /etc/profile
<span class="token assign-left variable">tmout</span><span class="token operator">=</span><span class="token number">900</span>
<span class="token builtin class-name">source</span> /etc/profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-检查ssh密码修改最小间隔" tabindex="-1"><a class="header-anchor" href="#_6-检查ssh密码修改最小间隔" aria-hidden="true">#</a> 6.检查SSH密码修改最小间隔</h3><p>检测类型：检查SSH密码修改最小间隔</p><p>风险等级：中危</p><p>风险描述：【/etc/login.defs】文件中把PASS_MIN_DAYS大于等于7</p><p>解决方案：</p><p>1、【/etc/login.defs】 PASS_MIN_DAYS 应设置为大于等于7 2、PASS_MIN_DAYS 7 需同时执行命令设置root 密码失效时间 命令如下: chage --mindays 7 root</p><h3 id="_7-检查ls和rm命令是否设置别名" tabindex="-1"><a class="header-anchor" href="#_7-检查ls和rm命令是否设置别名" aria-hidden="true">#</a> 7.检查ls和rm命令是否设置别名</h3><p>检测类型：检查别名配置</p><p>风险等级：低危</p><p>风险描述：ls、rm命令未配置别名或配置不当</p><p>解决方案：</p><p>1、在文件【~/.bashrc】中添加或修改alias ls=&#39;ls -alh&#39;以及alias rm=&#39;rm -i&#39; 2、执行【source ~/.bashrc】使配置生效</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vi</span> ~/.bashrc

<span class="token comment"># -l : (list)以列表形式显示</span>
<span class="token comment"># -a: (all)显示全部文件, 包括隐藏文件</span>
<span class="token comment"># -h: (human readable)人性化形式显示文件大小</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">ls</span><span class="token operator">=</span><span class="token string">&#39;ls -alh&#39;</span> 
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">rm</span><span class="token operator">=</span><span class="token string">&#39;rm -i&#39;</span> <span class="token comment">#询问是否删除</span>

<span class="token builtin class-name">source</span> ~/.bashrc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-设置ssh登录白名单" tabindex="-1"><a class="header-anchor" href="#_8-设置ssh登录白名单" aria-hidden="true">#</a> 8.设置ssh登录白名单</h3><p>检测类型：ssh访问控制列表检查</p><p>风险等级：低危</p><p>风险描述：未设置ssh登录白名单</p><p>解决方案：</p><p>1、在【/etc/hosts.deny】添加ALL:ALL 2、在【/etc/hosts.allow】添加sshd:【来访者IP地址】</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vi</span> /etc/hosts.deny
ALL:ALL

<span class="token function">vi</span> /etc/hosts.allow
sshd:【来访者IP地址】
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-检测是否使用安全的套接字层加密传输信息-避免被侦听敏感信息" tabindex="-1"><a class="header-anchor" href="#_9-检测是否使用安全的套接字层加密传输信息-避免被侦听敏感信息" aria-hidden="true">#</a> 9.检测是否使用安全的套接字层加密传输信息，避免被侦听敏感信息</h3><p>检测类型：是否使用加密的远程管理ssh</p><p>风险等级：中危</p><p>风险描述：未使用安全套接字加密远程管理ssh</p><p>解决方案：</p><p>1、在【<code>/etc/ssh/sshd_config</code>】文件中添加或修改Protocol 2 2、随后执行命令<code>systemctl restart sshd</code>重启进程</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vi</span> /etc/ssh/sshd_config
Protocol <span class="token number">2</span>

systemctl restart sshd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-检测是否开启系统防火墙" tabindex="-1"><a class="header-anchor" href="#_10-检测是否开启系统防火墙" aria-hidden="true">#</a> 10.检测是否开启系统防火墙</h3><p>检测类型：系统防火墙检测</p><p>风险等级：中危</p><p>风险描述：未开启系统防火墙，存在安全风险</p><p>解决方案：</p><p>1、建议开启系统防火墙，以避免所有服务器端口暴露在互联网上，如服务器有【安全组】功能，请忽略此提示 2、注意：开启系统防火墙需提前将需要开放的端口，特别是SSH和面板端口加入放行列表，否则可能导致服务器无法访问</p><h3 id="_11-检测是否禁止icmp协议访问服务器-禁ping" tabindex="-1"><a class="header-anchor" href="#_11-检测是否禁止icmp协议访问服务器-禁ping" aria-hidden="true">#</a> 11.检测是否禁止ICMP协议访问服务器(禁Ping)</h3><p>检测类型：ICMP检测</p><p>风险等级：中危</p><p>风险描述：当前未开启【禁Ping】功能，存在服务器被ICMP攻击或被扫的风险</p><p>解决方案：</p><p>1、在【安全】页面中开启【禁Ping】功能 2、注意：开启后无法通过ping通服务器IP或域名，请根据实际需求设置</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>永久禁用：
<span class="token builtin class-name">echo</span> <span class="token assign-left variable">net.ipv4.icmp_echo_ignore_all</span><span class="token operator">=</span><span class="token number">1</span> <span class="token operator">&gt;</span> /etc/sysctl.conf  
执行sysctl -p使新配置生效

永久启用：
<span class="token builtin class-name">echo</span> <span class="token assign-left variable">net.ipv4.icmp_echo_ignore_all</span><span class="token operator">=</span><span class="token number">0</span> <span class="token operator">&gt;</span> /etc/sysctl.conf 
执行sysctl -p使新配置生效
<span class="token function">sysctl</span> <span class="token parameter variable">-p</span>

临时禁用：
<span class="token builtin class-name">echo</span> <span class="token number">1</span> <span class="token operator">&gt;</span> /proc/sys/net/ipv4/icmp_echo_ignore_all

临时启用：
<span class="token builtin class-name">echo</span> <span class="token number">0</span> <span class="token operator">&gt;</span> /proc/sys/net/ipv4/icmp_echo_ignore_all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12-检查是否开启tcp-syncookie保护缓解syn-flood攻击" tabindex="-1"><a class="header-anchor" href="#_12-检查是否开启tcp-syncookie保护缓解syn-flood攻击" aria-hidden="true">#</a> 12.检查是否开启TCP-SYNcookie保护缓解syn flood攻击</h3><p>检测类型：TCP-SYNcookie保护检测</p><p>风险等级：低危</p><p>风险描述：未开启TCP-SYNcookie保护</p><p>解决方案：</p><p>1、在【<code>/etc/sysctl.conf</code>】文件中添加<code>net.ipv4.tcp_syncookies=1</code> 2、然后执行命令<code>sysctl -p</code>生效配置</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vi</span> /etc/sysctl.conf
<span class="token assign-left variable">net.ipv4.tcp_syncookies</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token function">sysctl</span> <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,82),l=[c];function d(p,o){return n(),a("div",null,l)}const u=s(i,[["render",d],["__file","Linux 安全.html.vue"]]);export{u as default};
