import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as a,a as t}from"./app-41defce9.js";const e={},p=t(`<h1 id="宝塔面板v7-7-0-解锁nginx防火墙及网站监控报表-绕过绑定账号" tabindex="-1"><a class="header-anchor" href="#宝塔面板v7-7-0-解锁nginx防火墙及网站监控报表-绕过绑定账号" aria-hidden="true">#</a> 宝塔面板v7.7.0-解锁Nginx防火墙及网站监控报表-绕过绑定账号</h1><p>测试环境：Ubuntu / Debian / CentOS<br> 测试时间：2021-12-20<br> 宝塔版本： 7.7.0<br> 仅测试了Nginx防火墙及网站监控报表两款插件，其它收费插件未测试<br> 其它系统及版本未进行测试，请自行验证，请勿在生产环境下进行测试！<br> 注意：修改代码后需要重启面板服务才能使其生效，如果面板出现乱码重启服务器即可；</p><p>解锁所有付费插件为永不过期</p><p>文件路径：www/server/panel/data/plugin.json<br> 搜索字符串：&quot;endtime&quot;: -1 全部替换为 &quot;endtime&quot;: 999999999999<br> 显示永久专业版或企业版标识</p><p>文件路径：www/server/panel/data/plugin.json<br> 查找字符串：name&quot;: &quot;coll_admin&quot;，将panel_pro或panel_ltd后面的-1改为0<br> 禁止解锁插件后自动修复为免费版</p><p>文件路径：www/server/panel/data/repair.json<br> 查找字符串：&quot;id&quot;: 16，将这段修复权限的代码删除<br> 禁止宝塔面板检测升级，防止失效</p><p>文件路径：www/server/panel/data/plugin.json<br> 查找字符串：name&quot;: &quot;coll_admin&quot;，将这段里的update_mgs删除或者改为null<br> 下面是2021/08/24的方法，上面是最新的<br> 修改后不能使用问题：如果修改后出现软件中心页面空白，那是因为代码位置有问题，可以参考下面示例图代码位置 位置一定要一致<br> 开始<br> 打开目录/www/server/panel/class找到并编辑panelplugin.py文件<br> 使用Ctrl+F搜索并找到softList[&#39;list&#39;] = tmpList这段代码，在其下方添加如下代码：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>                softList<span class="token punctuation">[</span><span class="token string">&#39;pro&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">for</span> soft <span class="token keyword">in</span> softList<span class="token punctuation">[</span><span class="token string">&#39;list&#39;</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            soft<span class="token punctuation">[</span><span class="token string">&#39;endtime&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例：<br><img src="https://static.linch.eu.org/bt_2.png" alt="" loading="lazy"></p><p>修改完成后重启面板，重启完成后就可以直接安装收费的插件了，Nginx防火墙也可以直接安装使用</p><p>网站监控报表<br> 如果需要使用网站监控报表还需另外修改一次代码：<br> 安装好网站监控报表插件后打开/www/server/panel/plugin/total目录并编辑total_main.py文件<br> 使用Ctrl+F搜索并找到if &#39;bt_total&#39; in session: return public.returnMsg(True,&#39;OK!&#39;);这段代码<br> 在这段代码前加上#将其注释掉，并在其下方加入以下代码：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>        session<span class="token punctuation">[</span><span class="token string">&#39;bt_total&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>
        <span class="token keyword">return</span> public<span class="token punctuation">.</span>returnMsg<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">,</span><span class="token string">&#39;OK!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>示例：<br><img src="https://static.linch.eu.org/bt_1.png" alt="" loading="lazy"></p><p>然后再次重启面板，即可使用网站监控报表插件了；</p><p>一键消除宝塔的强制登录方法简单粗暴，但是非常有效~</p><p>复制该命令到终端运行即可：<code>rm -f /www/server/panel/data/bind.pl</code></p>`,16),o=[p];function r(l,i){return s(),a("div",null,o)}const d=n(e,[["render",r],["__file","bt.html.vue"]]);export{d as default};
