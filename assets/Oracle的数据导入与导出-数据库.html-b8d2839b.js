import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o as l,c as r,b as s,d as n,e,a as p}from"./app-c4cf960f.js";const c={},i=p('<h1 id="oracle的数据-导入与导出-数据库" tabindex="-1"><a class="header-anchor" href="#oracle的数据-导入与导出-数据库" aria-hidden="true">#</a> Oracle的数据 导入与导出-数据库</h1><h2 id="_1-数据库导入导出需要注意" tabindex="-1"><a class="header-anchor" href="#_1-数据库导入导出需要注意" aria-hidden="true">#</a> 1 数据库导入导出需要注意</h2><p>1.目标数据库要与源数据库有着名称相同的表空间。</p><p>2.目标数据在进行导入时，用户名尽量相同(这样保证用户的权限级别相同)。</p><p>3.目标数据库每次在进行数据导入前，应做好数据备份，以防数据丢失。</p><p>4.弄清是导入导出到相同版本还是不同版本(oracle10g 版本与 oracle11g 版本)。</p><p>5.目标数据导入前,弄清楚是数据覆盖(替换),还是仅插入新数据或替换部分数据表。</p><p>6.确定目标数据库磁盘空间是否足够容纳新数据，是否需要扩充表空间。</p><p>7.导入导出时注意字符集是否相同，一般 Oracle 数据库的字符集只有一个，并且固定，</p><p>一般不改变。</p><p>8.确定操作者的账号权限。</p>',11),d={href:"https://article.itxueyuan.com/2d0kg5",target:"_blank",rel:"noopener noreferrer"},u={href:"https://zhuanlan.zhihu.com/p/73851450",target:"_blank",rel:"noopener noreferrer"},k={href:"https://www.jb51.net/article/156826.htm",target:"_blank",rel:"noopener noreferrer"},m={href:"https://www.gxlcms.com/sql_question-400828.html",target:"_blank",rel:"noopener noreferrer"},v=p(`<h2 id="_2-导出-数据-格式介绍" tabindex="-1"><a class="header-anchor" href="#_2-导出-数据-格式介绍" aria-hidden="true">#</a> 2 导出 数据 格式介绍</h2><p>Dmp 格式：.dmp 是二进制文件，可跨平台，还能包含权限，效率好。</p><p>Sql 格式：.sql 格式的文件，可用文本编辑器查看，通用性比较好，效率不如第一种，</p><p>适合小数据量导入导出。尤其注意的是表中不能有大字段 （blob,clob,long），如果有，会</p><p>报错。</p><p>Pde 格式：.pde 格式的文件，.pde 为 PL/SQL Developer 自有的文件格式，只能用 PL/SQL</p><p>Developer 工具导入导出，不能用文本编辑器查看。</p><h3 id="_3-方式" tabindex="-1"><a class="header-anchor" href="#_3-方式" aria-hidden="true">#</a> 3 方式</h3><h4 id="如果是docker-先登录" tabindex="-1"><a class="header-anchor" href="#如果是docker-先登录" aria-hidden="true">#</a> <strong>如果是docker 先登录：</strong></h4><p>进入镜像进行配置</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> oracle11 <span class="token function">bash</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>sqlplus /nolog
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>发现没有该命令，所以切换root用户。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">su</span> root 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>输入密码：helowin</p><p>编辑profile文件配置ORACLE环境变量</p><p>打开：vi /etc/profile ，在文件最后写上下面内容：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">ORACLE_HOME</span><span class="token operator">=</span>/home/oracle/app/oracle/product/11.2.0/dbhome_2
<span class="token builtin class-name">export</span> <span class="token assign-left variable">ORACLE_SID</span><span class="token operator">=</span>helowin
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$ORACLE_HOME</span>/bin:<span class="token environment constant">$PATH</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>保存后执行<code>source /etc/profile</code> 加载环境变量；</p><p>创建软连接</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ln</span> <span class="token parameter variable">-s</span> <span class="token variable">$ORACLE_HOME</span>/bin/sqlplus /usr/bin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>切换到oracle 用户</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">su</span> - oracle
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>登录sqlplus并修改sys、system用户密码</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>sqlplus <span class="token operator">/</span>nolog   <span class="token comment">--登录</span>
conn <span class="token operator">/</span><span class="token keyword">as</span> sysdba  <span class="token comment">--</span>
<span class="token keyword">alter</span> <span class="token keyword">user</span> system identified <span class="token keyword">by</span> system<span class="token punctuation">;</span><span class="token comment">--修改system用户账号密码；</span>
<span class="token keyword">alter</span> <span class="token keyword">user</span> sys identified <span class="token keyword">by</span> system<span class="token punctuation">;</span><span class="token comment">--修改sys用户账号密码；</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> test identified <span class="token keyword">by</span> test<span class="token punctuation">;</span> <span class="token comment">-- 创建内部管理员账号密码；</span>
<span class="token keyword">grant</span> <span class="token keyword">connect</span><span class="token punctuation">,</span>resource<span class="token punctuation">,</span>dba <span class="token keyword">to</span> yan_test<span class="token punctuation">;</span> <span class="token comment">--将dba权限授权给内部管理员账号和密码；</span>
<span class="token keyword">ALTER</span> PROFILE <span class="token keyword">DEFAULT</span> <span class="token keyword">LIMIT</span> PASSWORD_LIFE_TIME UNLIMITED<span class="token punctuation">;</span> <span class="token comment">--修改密码规则策略为密码永不过期；（会出现坑，后面讲解）</span>
<span class="token keyword">alter</span> system <span class="token keyword">set</span> processes<span class="token operator">=</span><span class="token number">1000</span> scope<span class="token operator">=</span>spfile<span class="token punctuation">;</span> <span class="token comment">--修改数据库最大连接数据；</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改以上信息后，需要重新启动数据库；</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>conn /as sysdba
<span class="token function">shutdown</span> immediate<span class="token punctuation">;</span> --关闭数据库
startup<span class="token punctuation">;</span> --启动数据库
exit：退出软链接
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="命令格式" tabindex="-1"><a class="header-anchor" href="#命令格式" aria-hidden="true">#</a> 命令格式</h4><p>exp|imp 用 户 名 / 密 码 @ 连 接 地 址 : 端 口 / 服 务 名 file= 路 径 / 文 件 名 .dmp</p><p>full=y|tabels(tablename,tablename...)|owner(username1,username2,username3)</p><p>exp:导出命令，导出时必写。</p><p>imp:导入命令，导入时必写,每次操作，二者只能选择一个执行。</p><p>username:导出数据的用户名，必写;</p><p>password:导出数据的密码，必写;</p><p>@:地址符号，必写;</p><p>SERVICENAME:Oracle 的服务名，必写;</p><p>1521:端口号，1521 是默认的可以不写,非默认要写;</p><p>file=&quot;文件名.dmp&quot; : 文件存放路径地址，必写;</p><p>full=y :表示全库导出。可以不写，则默认为 no,则只导出用户下的对象;</p><p>tables:表示只导出哪些表;</p><p>owner:导出该用户下对象;</p><p>full|tables|owner:只能使用一种;</p><h4 id="_1、传统方法" tabindex="-1"><a class="header-anchor" href="#_1、传统方法" aria-hidden="true">#</a> <em><strong>1、传统方法：</strong></em></h4><p><strong>dmp文件的导出</strong></p><p>首先,我们先了解dmp文件的导出</p><p>dmp文件导出一般用的比较多的是三种,分别是: 导出整个数据库实例的所有数据,导出指定用户的所有的表,导出指定表.</p><p>我们以自己的数据库为例,假设我们的数据库的实例为&quot;Oracle&quot;</p><p>可以通过&quot;任务管理器----&gt;服务&quot;中查看自己的数据库实例</p><p>一般信息是 已启用 自动 本地系统</p><p>打开cmd命令行 :</p><p>1: 将数据库Oracle完全导出,用户名system密码manager导出到 c:daochu.dmp中</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>exp system<span class="token operator">/</span>manager<span class="token variable">@Oracle</span> <span class="token keyword">file</span><span class="token operator">=</span>c:daochu<span class="token punctuation">.</span>dmp <span class="token keyword">full</span><span class="token operator">=</span>y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2: 将数据库中RFD用户与,JYZGCX用户的表导出</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>exp system<span class="token operator">/</span>manager<span class="token variable">@ORACLE</span> <span class="token keyword">file</span><span class="token operator">=</span>d:daochu<span class="token punctuation">.</span>dmp owner<span class="token operator">=</span><span class="token punctuation">(</span>RFD<span class="token punctuation">,</span>JYZGCX<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>3: 将数据库中的表T_USER,T_ROLE导出</p><p>system为用户名，manager为密码，ORACLE为数据库实例名，其实不一定非的用system用户，只要是拥有管理员权限的用户都可以</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>exp JYZGCX<span class="token operator">/</span>JYZGCX<span class="token variable">@Oracle</span> <span class="token keyword">file</span> <span class="token operator">=</span> d:datanewsmgnt<span class="token punctuation">.</span>dmp <span class="token keyword">tables</span> <span class="token operator">=</span> <span class="token punctuation">(</span>T_USER<span class="token punctuation">,</span>T_ROLE<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">--备份某几张表  ！！！！</span>
exp smsc<span class="token operator">/</span>smsc <span class="token keyword">file</span><span class="token operator">=</span><span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>oracle_bak<span class="token operator">/</span>dmp<span class="token operator">/</span>bakup0209_2<span class="token punctuation">.</span>dmp <span class="token keyword">tables</span><span class="token operator">=</span>\\<span class="token punctuation">(</span>send_msg_his<span class="token punctuation">,</span>send_msg<span class="token punctuation">,</span>recv_msg_his<span class="token punctuation">,</span>recv_msg\\<span class="token punctuation">)</span>
<span class="token comment">--备份整个数据库 ！！！！</span>
<span class="token comment">--方式1</span>
exp smsc<span class="token operator">/</span>smsc <span class="token keyword">file</span><span class="token operator">=</span><span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>oracle_bak<span class="token operator">/</span>dmp<span class="token operator">/</span>bakupsmmc0209_2<span class="token punctuation">.</span>dmp <span class="token keyword">full</span><span class="token operator">=</span>y
<span class="token comment">--方式2</span>
exp cop<span class="token operator">/</span>cop<span class="token variable">@133.96.84.39</span>:<span class="token number">1521</span><span class="token operator">/</span>coprule <span class="token keyword">file</span><span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oracle<span class="token operator">/</span>cop_20160902<span class="token punctuation">.</span>dmp owner<span class="token operator">=</span>cop log<span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>oracle<span class="token operator">/</span>cop<span class="token punctuation">.</span>log
<span class="token comment">--本机上</span>
exp zop<span class="token operator">/</span>zop<span class="token variable">@orcl</span> <span class="token keyword">file</span><span class="token operator">=</span> D:\\zop_bak<span class="token punctuation">.</span>dmp owner<span class="token operator">=</span>zop log<span class="token operator">=</span>D:\\zop_ba<span class="token punctuation">.</span>log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>dmp文件的导入</strong></p><p>步骤如下:</p><p>机器环境是windows7,其实也无所谓,命令行不都是样的么</p><p>\\1. 打开&quot;开始&quot; ---&gt;输入cmd,打开cmd命令窗口,输入: sqlplus/as sysdba; 然后使用conn / as sysdba;这样就可以以超级管理员的最高权限登录,当然这决定于init.ora文件中的数据库初始化参数.</p><p>\\2. 上面sysdba登录后,就可以创建表空间和用户了.</p><p>(打开&quot;开始&quot;--&gt;输入cmd--&gt;sqlplus/nolog; 输入conn/as sysdba 管理员账户登录;)</p><p>由于我们已经有dmp文件了,可以用notepad++ 打开dmp文件,进去按ctrl+f 去查找tablespace,可以找到这个dmp文件对应的表空间,然后根据表空间的信息去创建表空间,这样才能导入dmp文件.</p><p>然后就是创建表空间,命令如下:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">tablespace</span> USERS

logging

datefile <span class="token string">&#39;D:oracleproduct10.2.0oradataorclUSERS.dnf&#39;</span>

size <span class="token number">32</span>m

autoxtend onnext <span class="token number">32</span>m maxsize <span class="token number">2048</span>m

extend management <span class="token keyword">local</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建test用户,密码也是test222,使用上面创建的表空间</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">user</span> test identifiles <span class="token keyword">by</span> test222

 <span class="token keyword">default</span> <span class="token keyword">tablespace</span> USERS
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>给创建的test用户分配权限,为了方便可以直接分配dba权限</p><p><code>grant dba to test;</code></p><p>这样一来,我们前期的准备工作就完成了,然后就可以关掉刚刚的命令窗口了.</p><p>打开&quot;开始&quot; ---&gt;输入cmd(是cmd窗口不是sqlplus窗口)</p><p>由于上面的步骤中,创建了test用户,所以我们往test用户去导入数据</p><p>直接输入如下的语句:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>imp test<span class="token operator">/</span>test222<span class="token variable">@localhost</span><span class="token operator">/</span>orcl <span class="token keyword">file</span><span class="token operator">=</span><span class="token string">&quot;C:UsersxiejiachenDesktoptest20190630.DMP&quot;</span> <span class="token keyword">full</span> <span class="token operator">=</span>y<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>下面解释一下上面的语句:</p><p>test是上面创建的登录数据库的用户名</p><p>test222是上面的登录数据库的密码</p><p>localhost: 代表你的数据库是本机还是远程导入,需要的可以随时替换ip地址</p><p>orcl: 是实例的名称</p><p>file: 后面是你的dmp的文件路径</p><p>full=y : 全部导入</p><p>以上就是oracle数据库导出和导入dmp文件的两种方法.</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">--数据的导入</span>
<span class="token comment">--1 将D:\\daochu.dmp 中的数据导入 TEST数据库中。</span>
 imp system<span class="token operator">/</span>manager<span class="token variable">@TEST</span> <span class="token keyword">file</span><span class="token operator">=</span>d:\\daochu<span class="token punctuation">.</span>dmp
 imp aichannel<span class="token operator">/</span>aichannel<span class="token variable">@TEST</span> <span class="token keyword">full</span><span class="token operator">=</span>y <span class="token keyword">file</span><span class="token operator">=</span>d:\\datanewsmgnt<span class="token punctuation">.</span>dmp <span class="token keyword">ignore</span><span class="token operator">=</span>y
<span class="token comment">--上面可能有点问题，因为有的表已经存在，然后它就报错，对该表就不进行导入。</span>
<span class="token comment">-- 在后面加上 ignore=y 就可以了。</span>
<span class="token comment">--2 将d:daochu.dmp中的表table1 导入</span>
imp system<span class="token operator">/</span>manager<span class="token variable">@TEST</span> <span class="token keyword">file</span><span class="token operator">=</span>d:\\daochu<span class="token punctuation">.</span>dmp <span class="token keyword">tables</span><span class="token operator">=</span><span class="token punctuation">(</span>table1<span class="token punctuation">)</span>
<span class="token comment">--基本上上面的导入导出够用了。不少情况要先是将表彻底删除，然后导入。</span>
注意：
操作者要有足够的权限，权限不够它会提示。
数据库时可以连上的。可以用tnsping TEST 来获得数据库TEST能否连上。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2、数据泵方法" tabindex="-1"><a class="header-anchor" href="#_2、数据泵方法" aria-hidden="true">#</a> 2、数据泵方法：</h4><p>创建directory:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>expdp<span class="token punctuation">(</span>impdp<span class="token punctuation">)</span> username<span class="token operator">/</span>password<span class="token variable">@SERVICENAME</span>:<span class="token number">1521</span> 
schemas<span class="token operator">=</span>username <span class="token keyword">dumpfile</span><span class="token operator">=</span>file1<span class="token punctuation">.</span>dmp logfile<span class="token operator">=</span>file1<span class="token punctuation">.</span>log 
directory<span class="token operator">=</span>testdata1 remap_schema<span class="token operator">=</span>test:test<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>数据库导出举例:</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>expdp xinxiaoyong<span class="token operator">/</span><span class="token number">123456</span><span class="token variable">@127.0.0.1</span>:<span class="token number">1521</span> schemas<span class="token operator">=</span>xinxiaoyong <span class="token keyword">dumpfile</span><span class="token operator">=</span>test<span class="token punctuation">.</span>dmp 

logfile<span class="token operator">=</span>test<span class="token punctuation">.</span>log directory<span class="token operator">=</span>testdata1<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>exp:导出命令，导出时必写。
imp:导入命令，导入时必写<span class="token punctuation">,</span>每次操作，二者只能选择一个执行。
username:导出数据的用户名，必写<span class="token punctuation">;</span>
password:导出数据的密码，必写<span class="token punctuation">;</span>
@:地址符号，必写<span class="token punctuation">;</span>
SERVICENAME:Oracle的服务名，必写<span class="token punctuation">;</span>
<span class="token number">1521</span>:端口号，<span class="token number">1521</span>是默认的可以不写<span class="token punctuation">,</span>非默认要写<span class="token punctuation">;</span>
schemas：导出操作的用户名<span class="token punctuation">;</span>
<span class="token keyword">dumpfile</span>：导出的文件<span class="token punctuation">;</span>
logfile:导出的日志文件<span class="token punctuation">,</span>可以不写；
directory:创建的文件夹名称<span class="token punctuation">;</span>
remap_schema<span class="token operator">=</span>源数据库用户名:目标数据库用户名<span class="token punctuation">,</span>二者不同时必写，相同可以省略<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1.查看表空间：</p><p><code>select ＊　from dba_tablespaces;</code></p><p>2.查看管理理员目录(同时查看操作系统是否存在，因为Oracle并不关心该目录是否存在，如果不存在，则出错)。</p><p><code>select ＊　from dba_directories;</code></p><p>3.创建逻辑目录，该命令不会在操作系统创建真正的目录，最好以system等管理员创建。</p><p><code>create directory testdata1 as &#39;d:testdump&#39;;</code></p><p>4.给xinxiaoyong用户赋予在指定目录的操作权限，最好以system等管理员赋予。<br> //xinxiaoyong 是用户名(123456是用户密码)</p><p><code>grant read,write on directory testdata1 to xinxiaoyong;</code></p><p>5.导出数据</p><p>1)按用户导</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>expdp xinxiaoyong<span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">123456</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token variable">@orcl</span> schemas<span class="token operator">=</span>xinxiaoyong <span class="token keyword">dumpfile</span><span class="token operator">=</span>expdp<span class="token punctuation">.</span>dmp directory<span class="token operator">=</span>testdata1<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2)并行进程</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>parallel expdp xinxiaoyong<span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">123456</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token variable">@orcl</span> 
directory<span class="token operator">=</span>testdata1 <span class="token keyword">dumpfile</span><span class="token operator">=</span>xinxiaoyong3<span class="token punctuation">.</span>dmp parallel<span class="token operator">=</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">40</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> job_name<span class="token operator">=</span>xinxiaoyong3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3)按表名导</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>expdp xinxiaoyong<span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">123456</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token variable">@orcl</span> <span class="token keyword">tables</span><span class="token operator">=</span>emp<span class="token punctuation">,</span>dept <span class="token keyword">dumpfile</span><span class="token operator">=</span>expdp<span class="token punctuation">.</span>dmp directory<span class="token operator">=</span>testdata1<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>4)按查询条件导</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>expdp xinxiaoyong<span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">123456</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token variable">@orcl</span> 
directory<span class="token operator">=</span>testdata1 <span class="token keyword">dumpfile</span><span class="token operator">=</span>expdp<span class="token punctuation">.</span>dmp <span class="token keyword">tables</span><span class="token operator">=</span>emp query<span class="token operator">=</span><span class="token string">&#39;WHERE deptno=20&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>5)按表空间导</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>expdp system<span class="token operator">/</span>manager directory<span class="token operator">=</span>testdata1 <span class="token keyword">dumpfile</span><span class="token operator">=</span><span class="token keyword">tablespace</span><span class="token punctuation">.</span>dmp tablespaces<span class="token operator">=</span><span class="token keyword">temp</span><span class="token punctuation">,</span>example<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>6)导整个数据库</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>expdp system<span class="token operator">/</span>manager directory<span class="token operator">=</span>testdata1 <span class="token keyword">dumpfile</span><span class="token operator">=</span><span class="token keyword">full</span><span class="token punctuation">.</span>dmp <span class="token keyword">FULL</span><span class="token operator">=</span>y<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>6.还原数据<br> 1)导到指定用户下</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code> impdp xinxiaoyong<span class="token operator">/</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token number">123456</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> directory<span class="token operator">=</span>testdata1 <span class="token keyword">dumpfile</span><span class="token operator">=</span>expdp<span class="token punctuation">.</span>dmp schemas<span class="token operator">=</span>xinxiaoyong<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2)改变表的</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>owner impdp system<span class="token operator">/</span>manager 
directory<span class="token operator">=</span>testdata1 <span class="token keyword">dumpfile</span><span class="token operator">=</span>expdp<span class="token punctuation">.</span>dmp <span class="token keyword">tables</span><span class="token operator">=</span>xinxiaoyong<span class="token punctuation">.</span>dept remap_schema <span class="token operator">=</span>xinxiaoyong:system<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>3)导入表空间</p><div class="language-sqal line-numbers-mode" data-ext="sqal"><pre class="language-sqal"><code>impdp system/manager directory=testdata1 dumpfile=tablespace.dmp tablespaces=example;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>4)导入数据库</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>impdb system<span class="token operator">/</span>manager directory<span class="token operator">=</span>dump_dir <span class="token keyword">dumpfile</span><span class="token operator">=</span><span class="token keyword">full</span><span class="token punctuation">.</span>dmp <span class="token keyword">FULL</span><span class="token operator">=</span>y<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>5)追加数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>impdp system<span class="token operator">/</span>manager 
directory<span class="token operator">=</span>testdata1 <span class="token keyword">dumpfile</span><span class="token operator">=</span>expdp<span class="token punctuation">.</span>dmp schemas<span class="token operator">=</span>system table_exists_action<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3、plsql方法" tabindex="-1"><a class="header-anchor" href="#_3、plsql方法" aria-hidden="true">#</a> 3、PLSQL方法：</h4><p>登录plsql工具，所使用用户为源数据库有导出权限（exp_full_database,dba等）的用户。</p><p>1.导出建表语句（包括存储结构）</p><p>导出步骤tools -&gt;export user object，选择要导出的对象，导出.sql格式文件并等待导出完成，如 下图：</p><figure><img src="https://static.xlc520.tk/blogImage/image-20220620092932901.png" alt="image-20220620092932901" tabindex="0" loading="lazy"><figcaption>image-20220620092932901</figcaption></figure><p>导出数据文件 ;<br>    2.导出步骤tools -&gt;export tables，选择要导出的表及导出的格式进行导出。</p><p>导出为dmp格式，如下图：</p><figure><img src="https://static.xlc520.tk/blogImage/image-20220620092943308.png" alt="image-20220620092943308" tabindex="0" loading="lazy"><figcaption>image-20220620092943308</figcaption></figure><p>导出为sql格式，如下图：</p><figure><img src="https://static.xlc520.tk/blogImage/image-20220620092949353.png" alt="image-20220620092949353" tabindex="0" loading="lazy"><figcaption>image-20220620092949353</figcaption></figure><p>导出为pde格式，如下图：</p><figure><img src="https://static.xlc520.tk/blogImage/image-20220620092954469.png" alt="image-20220620092954469" tabindex="0" loading="lazy"><figcaption>image-20220620092954469</figcaption></figure><p>提示说明：采用第三方工具导出导入整个数据库的话，耗时较长，一定要有足够</p><p>的时间来操作(数据量大的话需要好几个小时)。</p><p>3.导入建表语句<br>    导入步骤tools-&gt;import tables-&gt;SQL Inserts 导入.sql文件<br> 4.导入数据；<br>    tools-&gt;import talbes，然后再根据导出的数据格式选择导入dmp文件，或者sql文件，<br> 或者pde文件。<br>    提示说明：导入之前最好把以前的表删除，当然导入另外数据库除外。<br>       另外导入时当发现进度条一直卡在一个点，而且导出的文件不再增大时，甚至是提示程序<br> 未响应，千万不要以为程序卡死了，这个导入导出就是比较缓慢，只要没有提示报错，</p><p>或者导入完成就不要停止程序。</p>`,138);function b(g,h){const a=t("ExternalLinkIcon");return l(),r("div",null,[i,s("p",null,[s("a",d,[n("https://article.itxueyuan.com/2d0kg5"),e(a)])]),s("p",null,[s("a",u,[n("https://zhuanlan.zhihu.com/p/73851450"),e(a)])]),s("p",null,[s("a",k,[n("https://www.jb51.net/article/156826.htm"),e(a)])]),s("p",null,[s("a",m,[n("https://www.gxlcms.com/sql_question-400828.html"),e(a)])]),v])}const f=o(c,[["render",b],["__file","Oracle的数据导入与导出-数据库.html.vue"]]);export{f as default};
