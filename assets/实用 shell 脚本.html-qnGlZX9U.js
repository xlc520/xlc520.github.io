const n=JSON.parse(`{"key":"v-4613513a","path":"/linux/%E5%AE%9E%E7%94%A8%20shell%20%E8%84%9A%E6%9C%AC.html","title":"实用 shell 脚本","lang":"zh-CN","frontmatter":{"author":"xlc520","title":"实用 shell 脚本","description":"实用 shell 脚本，建议收藏！","date":"2022-02-15T00:00:00.000Z","category":"Linux","tag":"Linux","article":true,"timeline":true,"icon":"type","head":[["meta",{"property":"og:url","content":"https://blog.ciberviler.top/linux/%E5%AE%9E%E7%94%A8%20shell%20%E8%84%9A%E6%9C%AC.html"}],["meta",{"property":"og:site_name","content":"StudyNote"}],["meta",{"property":"og:title","content":"实用 shell 脚本"}],["meta",{"property":"og:description","content":"实用 shell 脚本，建议收藏！"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-03-15T09:41:05.000Z"}],["meta",{"property":"article:author","content":"xlc520"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:published_time","content":"2022-02-15T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2023-03-15T09:41:05.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"实用 shell 脚本\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-02-15T00:00:00.000Z\\",\\"dateModified\\":\\"2023-03-15T09:41:05.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xlc520\\"}]}"]]},"headers":[{"level":2,"title":"1、服务器系统配置初始化","slug":"_1、服务器系统配置初始化","link":"#_1、服务器系统配置初始化","children":[]},{"level":2,"title":"2、批量创建多个用户并设置密码","slug":"_2、批量创建多个用户并设置密码","link":"#_2、批量创建多个用户并设置密码","children":[]},{"level":2,"title":"3、一键查看服务器利用率","slug":"_3、一键查看服务器利用率","link":"#_3、一键查看服务器利用率","children":[]},{"level":2,"title":"4、找出占用CPU 内存过高的进程","slug":"_4、找出占用cpu-内存过高的进程","link":"#_4、找出占用cpu-内存过高的进程","children":[]},{"level":2,"title":"5、查看网卡的实时流量","slug":"_5、查看网卡的实时流量","link":"#_5、查看网卡的实时流量","children":[]},{"level":2,"title":"6、监控多台服务器磁盘利用率脚本","slug":"_6、监控多台服务器磁盘利用率脚本","link":"#_6、监控多台服务器磁盘利用率脚本","children":[]},{"level":2,"title":"7、批量检测网站是否异常并邮件通知","slug":"_7、批量检测网站是否异常并邮件通知","link":"#_7、批量检测网站是否异常并邮件通知","children":[]},{"level":2,"title":"8、批量主机远程执行命令脚本","slug":"_8、批量主机远程执行命令脚本","link":"#_8、批量主机远程执行命令脚本","children":[]},{"level":2,"title":"9、一键部署LNMP网站平台脚本","slug":"_9、一键部署lnmp网站平台脚本","link":"#_9、一键部署lnmp网站平台脚本","children":[]},{"level":2,"title":"10、监控MySQL主从同步状态是否异常脚本","slug":"_10、监控mysql主从同步状态是否异常脚本","link":"#_10、监控mysql主从同步状态是否异常脚本","children":[]},{"level":2,"title":"11、MySql数据库备份脚本","slug":"_11、mysql数据库备份脚本","link":"#_11、mysql数据库备份脚本","children":[]},{"level":2,"title":"12、Nginx访问日志分析","slug":"_12、nginx访问日志分析","link":"#_12、nginx访问日志分析","children":[]},{"level":2,"title":"13、Nginx访问日志自动按天（周、月）切割","slug":"_13、nginx访问日志自动按天-周、月-切割","link":"#_13、nginx访问日志自动按天-周、月-切割","children":[]},{"level":2,"title":"14、自动发布Java项目（Tomcat）","slug":"_14、自动发布java项目-tomcat","link":"#_14、自动发布java项目-tomcat","children":[]},{"level":2,"title":"15、自动发布PHP项目","slug":"_15、自动发布php项目","link":"#_15、自动发布php项目","children":[]},{"level":2,"title":"16、DOS攻击防范（自动屏蔽攻击IP）","slug":"_16、dos攻击防范-自动屏蔽攻击ip","link":"#_16、dos攻击防范-自动屏蔽攻击ip","children":[]},{"level":2,"title":"17、目录入侵检测与告警","slug":"_17、目录入侵检测与告警","link":"#_17、目录入侵检测与告警","children":[]},{"level":2,"title":"18、Dos攻击防范（自动屏蔽攻击IP）","slug":"_18、dos攻击防范-自动屏蔽攻击ip","link":"#_18、dos攻击防范-自动屏蔽攻击ip","children":[]},{"level":2,"title":"19、Linux系统发送告警脚本","slug":"_19、linux系统发送告警脚本","link":"#_19、linux系统发送告警脚本","children":[]},{"level":2,"title":"20、MySQL数据库备份单循环","slug":"_20、mysql数据库备份单循环","link":"#_20、mysql数据库备份单循环","children":[]},{"level":2,"title":"21、MySQL数据库备份多循环","slug":"_21、mysql数据库备份多循环","link":"#_21、mysql数据库备份多循环","children":[]},{"level":2,"title":"22、Nginx 访问访问日志按天切割","slug":"_22、nginx-访问访问日志按天切割","link":"#_22、nginx-访问访问日志按天切割","children":[]},{"level":2,"title":"23、Nginx访问日志分析脚本","slug":"_23、nginx访问日志分析脚本","link":"#_23、nginx访问日志分析脚本","children":[]},{"level":2,"title":"24、查看网卡实时流量脚本","slug":"_24、查看网卡实时流量脚本","link":"#_24、查看网卡实时流量脚本","children":[]},{"level":2,"title":"25、服务器系统配置初始化脚本","slug":"_25、服务器系统配置初始化脚本","link":"#_25、服务器系统配置初始化脚本","children":[]},{"level":2,"title":"26、监控100台服务器磁盘利用率脚本","slug":"_26、监控100台服务器磁盘利用率脚本","link":"#_26、监控100台服务器磁盘利用率脚本","children":[]},{"level":2,"title":"27、监控MySQL主从同步状态是否异常脚本","slug":"_27、监控mysql主从同步状态是否异常脚本","link":"#_27、监控mysql主从同步状态是否异常脚本","children":[]},{"level":2,"title":"28、目录文件变化监控和实时文件同步","slug":"_28、目录文件变化监控和实时文件同步","link":"#_28、目录文件变化监控和实时文件同步","children":[]},{"level":2,"title":"29、批量创建100用户并设置密码脚本","slug":"_29、批量创建100用户并设置密码脚本","link":"#_29、批量创建100用户并设置密码脚本","children":[]},{"level":2,"title":"30、批量检测网站是否异常脚本","slug":"_30、批量检测网站是否异常脚本","link":"#_30、批量检测网站是否异常脚本","children":[]},{"level":2,"title":"31、批量主机远程执行命令脚本","slug":"_31、批量主机远程执行命令脚本","link":"#_31、批量主机远程执行命令脚本","children":[]},{"level":2,"title":"32、一键部署LNMP网站平台脚本","slug":"_32、一键部署lnmp网站平台脚本","link":"#_32、一键部署lnmp网站平台脚本","children":[]},{"level":2,"title":"33、一键查看服务器资源利用率","slug":"_33、一键查看服务器资源利用率","link":"#_33、一键查看服务器资源利用率","children":[]},{"level":2,"title":"34、找出占用CPU 内存过高的进程脚本","slug":"_34、找出占用cpu-内存过高的进程脚本","link":"#_34、找出占用cpu-内存过高的进程脚本","children":[]},{"level":2,"title":"35、自动发布Java项目（Tomcat）","slug":"_35、自动发布java项目-tomcat","link":"#_35、自动发布java项目-tomcat","children":[]},{"level":2,"title":"36、自动发布PHP项目脚本","slug":"_36、自动发布php项目脚本","link":"#_36、自动发布php项目脚本","children":[]}],"git":{"createdTime":1668948234000,"updatedTime":1678873265000,"contributors":[{"name":"xlc520","email":"2215400217@qq.com","commits":2}]},"readingTime":{"minutes":14.47,"words":4340},"filePathRelative":"linux/实用 shell 脚本.md","localizedDate":"2022年2月15日","excerpt":"<h1> 实用 shell 脚本</h1>\\n<h2> 1、服务器系统配置初始化</h2>\\n<div class=\\"language-bash line-numbers-mode\\" data-ext=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"token comment\\">#/bin/bash</span>\\n<span class=\\"token comment\\"># 安装系统性能分析工具及其他</span>\\nyum <span class=\\"token function\\">install</span> gcc <span class=\\"token function\\">make</span> autoconf <span class=\\"token function\\">vim</span> sysstat net-tools iostat iftop iotp <span class=\\"token function\\">wget</span> lrzsz <span class=\\"token function\\">lsof</span> <span class=\\"token function\\">unzip</span> openssh-clients net-tool <span class=\\"token function\\">vim</span> ntpdate <span class=\\"token parameter variable\\">-y</span>\\n<span class=\\"token comment\\"># 设置时区并同步时间</span>\\n<span class=\\"token function\\">ln</span> <span class=\\"token parameter variable\\">-s</span> /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\\n<span class=\\"token keyword\\">if</span> <span class=\\"token operator\\">!</span> <span class=\\"token function\\">crontab</span> <span class=\\"token parameter variable\\">-l</span> <span class=\\"token operator\\">|</span><span class=\\"token function\\">grep</span> ntpdate <span class=\\"token operator\\">&amp;&gt;</span>/dev/null <span class=\\"token punctuation\\">;</span> <span class=\\"token keyword\\">then</span>\\n    <span class=\\"token punctuation\\">(</span>echo <span class=\\"token string\\">\\"* 1 * * * ntpdate time.windows.com &gt;/dev/null 2&gt;&amp;1\\"</span><span class=\\"token punctuation\\">;</span><span class=\\"token function\\">crontab</span> -l<span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">|</span><span class=\\"token function\\">crontab</span> \\n<span class=\\"token keyword\\">fi</span>\\n \\n<span class=\\"token comment\\"># 禁用selinux</span>\\n<span class=\\"token function\\">sed</span> <span class=\\"token parameter variable\\">-i</span> <span class=\\"token string\\">'/SELINUX/{s/permissive/disabled/}'</span> /etc/selinux/config\\n \\n<span class=\\"token comment\\"># 关闭防火墙</span>\\n<span class=\\"token keyword\\">if</span> <span class=\\"token function\\">egrep</span> <span class=\\"token string\\">\\"7.[0-9]\\"</span> /etc/redhat-release <span class=\\"token operator\\">&amp;&gt;</span>/dev/null<span class=\\"token punctuation\\">;</span> <span class=\\"token keyword\\">then</span>\\n    systemctl stop firewalld\\n    systemctl disable firewalld\\n<span class=\\"token keyword\\">elif</span> <span class=\\"token function\\">egrep</span> <span class=\\"token string\\">\\"6.[0-9]\\"</span> /etc/redhat-release <span class=\\"token operator\\">&amp;&gt;</span>/dev/null<span class=\\"token punctuation\\">;</span> <span class=\\"token keyword\\">then</span>\\n    <span class=\\"token function\\">service</span> iptables stop\\n    <span class=\\"token function\\">chkconfig</span> iptables off\\n<span class=\\"token keyword\\">fi</span>\\n \\n<span class=\\"token comment\\"># 历史命令显示操作时间</span>\\n<span class=\\"token keyword\\">if</span> <span class=\\"token operator\\">!</span> <span class=\\"token function\\">grep</span> HISTTIMEFORMAT /etc/bashrc<span class=\\"token punctuation\\">;</span> <span class=\\"token keyword\\">then</span>\\n    <span class=\\"token builtin class-name\\">echo</span> <span class=\\"token string\\">'export HISTTIMEFORMAT=\\"%Y-%m-%d %H:%M:%S  \`whoami\` \\"'</span> <span class=\\"token operator\\">&gt;&gt;</span> /etc/bashrc\\n<span class=\\"token keyword\\">fi</span>\\n \\n<span class=\\"token comment\\"># SSH超时时间</span>\\n<span class=\\"token keyword\\">if</span> <span class=\\"token operator\\">!</span> <span class=\\"token function\\">grep</span> <span class=\\"token string\\">\\"TMOUT=600\\"</span> /etc/profile <span class=\\"token operator\\">&amp;&gt;</span>/dev/null<span class=\\"token punctuation\\">;</span> <span class=\\"token keyword\\">then</span>\\n    <span class=\\"token builtin class-name\\">echo</span> <span class=\\"token string\\">\\"export TMOUT=600\\"</span> <span class=\\"token operator\\">&gt;&gt;</span> /etc/profile\\n<span class=\\"token keyword\\">fi</span>\\n \\n<span class=\\"token comment\\"># 禁止root远程登录 切记给系统添加普通用户，给su到root的权限</span>\\n<span class=\\"token function\\">sed</span> <span class=\\"token parameter variable\\">-i</span> <span class=\\"token string\\">'s/#PermitRootLogin yes/PermitRootLogin no/'</span> /etc/ssh/sshd_config\\n \\n<span class=\\"token comment\\"># 禁止定时任务向发送邮件</span>\\n<span class=\\"token function\\">sed</span> <span class=\\"token parameter variable\\">-i</span> <span class=\\"token string\\">'s/^MAILTO=root/MAILTO=\\"\\"/'</span> /etc/crontab \\n \\n<span class=\\"token comment\\"># 设置最大打开文件数</span>\\n<span class=\\"token keyword\\">if</span> <span class=\\"token operator\\">!</span> <span class=\\"token function\\">grep</span> <span class=\\"token string\\">\\"* soft nofile 65535\\"</span> /etc/security/limits.conf <span class=\\"token operator\\">&amp;&gt;</span>/dev/null<span class=\\"token punctuation\\">;</span> <span class=\\"token keyword\\">then</span>\\n<span class=\\"token function\\">cat</span> <span class=\\"token operator\\">&gt;&gt;</span> /etc/security/limits.conf <span class=\\"token operator\\">&lt;&lt;</span> <span class=\\"token string\\">EOF\\n    * soft nofile 65535\\n    * hard nofile 65535\\nEOF</span>\\n<span class=\\"token keyword\\">fi</span>\\n \\n<span class=\\"token comment\\"># 系统内核优化</span>\\n<span class=\\"token function\\">cat</span> <span class=\\"token operator\\">&gt;&gt;</span> /etc/sysctl.conf <span class=\\"token operator\\">&lt;&lt;</span> <span class=\\"token string\\">EOF\\nnet.ipv4.tcp_syncookies = 1\\nnet.ipv4.tcp_max_tw_buckets = 20480\\nnet.ipv4.tcp_max_syn_backlog = 20480\\nnet.core.netdev_max_backlog = 262144\\nnet.ipv4.tcp_fin_timeout = 20  \\nEOF</span>\\n \\n<span class=\\"token comment\\"># 减少SWAP使用</span>\\n<span class=\\"token builtin class-name\\">echo</span> <span class=\\"token string\\">\\"0\\"</span> <span class=\\"token operator\\">&gt;</span> /proc/sys/vm/swappiness\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>"}`);export{n as data};
