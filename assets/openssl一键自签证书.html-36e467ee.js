import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as s,c as n,a as e}from"./app-6ab5d115.js";const p={},t=e(`<h1 id="openssl一键自签证书" tabindex="-1"><a class="header-anchor" href="#openssl一键自签证书" aria-hidden="true">#</a> Openssl一键自签证书</h1><p><code>vim openssl.sh</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$domain</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">do</span>
    <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;输入域名/IP(必填,如 *.haoduck.com): &quot;</span> domain
<span class="token keyword">done</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;输入邮箱(选填,默认admin@haoduck.com): &quot;</span> mail
<span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$mail</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">mail</span><span class="token operator">=</span>admin@haoduck.com
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;输入日期(选填,默认3650): &quot;</span> day
<span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$day</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">day</span><span class="token operator">=</span><span class="token number">3650</span>
<span class="token assign-left variable">dir</span><span class="token operator">=</span><span class="token variable">$domain</span> <span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable">$dir</span>
<span class="token assign-left variable">crt_file</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$dir</span>/<span class="token variable">\${domain}</span>.crt&quot;</span>
<span class="token assign-left variable">key_file</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$dir</span>/<span class="token variable">\${domain}</span>.key&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">command</span> <span class="token parameter variable">-v</span> openssl<span class="token variable">)</span></span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    openssl req <span class="token parameter variable">-x509</span> <span class="token parameter variable">-nodes</span> <span class="token parameter variable">-newkey</span> rsa:2048 <span class="token parameter variable">-days</span> <span class="token variable">$day</span> <span class="token parameter variable">-keyout</span> <span class="token variable">$key_file</span> <span class="token parameter variable">-out</span> <span class="token variable">$crt_file</span> <span class="token parameter variable">-subj</span> <span class="token string">&quot;/C=US/ST=California/L=Los Angeles/O=Haoduck/OU=Aoao/CN=<span class="token variable">\${domain}</span>/emailAddress=<span class="token variable">\${mail}</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\\t">\\t</span>证书：<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">$crt_file</span><span class="token entity" title="\\n">\\n</span><span class="token entity" title="\\t">\\t</span>私钥：<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">$key_file</span>&quot;</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;openssl 未安装&quot;</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>bash openssl.sh</code></p>`,4),l=[t];function o(i,c){return s(),n("div",null,l)}const u=a(p,[["render",o],["__file","openssl一键自签证书.html.vue"]]);export{u as default};
